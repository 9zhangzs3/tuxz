import{E as f,p as _}from"./constants.32292d8d.js";import{E as w}from"./el-progress.1e2c2aec.js";import{E as v}from"./index.5fe7711e.js";import"./base.c3d2e3d9.js";/* empty css                *//* empty css                  */import{d as b,r as t,k as h,l as E,q as a,s,B as x,m as g,v as k,F as B}from"./entry.1dc6e359.js";import"./error.78e43d3e.js";import"./use-form-common-props.197ce949.js";import"./index.901f8d30.js";import"./use-global-config.5035f634.js";import"./index.f8748455.js";const C=["src"],q=b({__name:"imageColorize",setup(y){const r=t(),i=t([]),l=t();t(""),t(!1),t();const m=async e=>{r.value=e;const o=new FormData;o.append("file",e.raw);const n=await(await fetch("http://124.220.46.188:5001/api/colorize",{method:"POST",body:o})).blob();l.value=URL.createObjectURL(n)};function p(){const e=document.createElement("a");e.href=l.value,e.download=r.value.name,e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{e.remove()},100)}return(e,o)=>{const c=f,n=w,u=v;return h(),E(B,null,[a(n,{"file-list":i.value,"onUpdate:fileList":o[0]||(o[0]=d=>i.value=d),"auto-upload":!1,"list-type":"picture-card","show-file-list":!0,onChange:m},{default:s(()=>[a(c,null,{default:s(()=>[a(x(_))]),_:1})]),_:1},8,["file-list"]),g("img",{src:l.value,style:{"max-width":"500px","max-height":"500px"}},null,8,C),a(u,{onClick:p},{default:s(()=>[k("下载")]),_:1})],64)}}});export{q as default};
