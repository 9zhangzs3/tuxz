import{T as L,M,H as R}from"./components.b8cc7c2b.js";import{E as H}from"./index.8f5bc808.js";import{E as J}from"./el-progress.1eae7595.js";import{E as $,p as q,q as O,z as j,u as W,a as Z}from"./constants.0737b991.js";import{E as G}from"./el-card.5d6d708b.js";import{E as K}from"./el-overlay.07b01796.js";import{_ as Q}from"./client-only.80bd0e48.js";import"./base.c054e6db.js";/* empty css                  *//* empty css                */import"./el-loading.b1ea91ae.js";import{d as X,r as m,k as Y,l as ee,q as e,s as a,v as y,m as l,z as C,A as F,B as _,F as te,x as oe,y as ae,_ as le}from"./entry.89a8456c.js";import{D as se}from"./vuedraggable.umd.0a0a1d84.js";import{p as ne}from"./pdf.worker.entry.59fb93a6.js";import{J as ie,F as ce}from"./FileSaver.min.8ad78cd6.js";import{E as z}from"./index.13bae289.js";import"./index.64d33a3b.js";import"./use-global-config.0787c757.js";import"./use-form-common-props.4add0763.js";import"./index.f8748455.js";import"./error.78e43d3e.js";import"./vnode.76be746b.js";import"./focus-trap.110fc0b9.js";import"./aria.60e0cdc6.js";import"./event.9519ab40.js";import"./scroll.58f66198.js";import"./_commonjsHelpers.042e6b4d.js";const w=h=>(oe("data-v-7423f546"),h=h(),ae(),h),de={style:{width:"90%",margin:"0 auto"}},re={style:{width:"60%",margin:"0 auto","margin-top":"15%"}},pe=w(()=>l("div",{style:{"font-size":"24px",height:"50px"}},"PDF转图片",-1)),me={style:{"margin-top":"10%","font-size":"24px"}},_e=w(()=>l("div",{style:{color:"black"}},"或者拖放一个PDF文件",-1)),ue={style:{width:"100%",margin:"0 auto","margin-top":"10%"}},ge={class:"drag-box",style:{width:"70%",float:"left",margin:"0 auto","text-align":"center"}},fe={style:{float:"left",margin:"0 8px 8px 0",border:"1px solid var(--el-border-color)","border-radius":"6px",position:"relative",width:"152px",height:"213px"}},he=["id"],ve=["src"],ye={style:{float:"right",width:"25%"}},we=w(()=>l("br",null,null,-1)),xe=w(()=>l("div",{style:{height:"20px"}},null,-1)),ke=X({__name:"pdf2img",setup(h){const v=m(""),u=m([]),E=m(""),x=m(!1),k=m(!0),I=m(),P=o=>{u.value=[];let t=o.raw;console.log(t),console.log(t.name),v.value=t.name.substring(0,t.name.lastIndexOf(".")),console.log(v.value);var c=new FileReader;c.readAsDataURL(t),c.onload=function(){ne.getDocument(c.result).promise.then(r=>{var s=r.numPages;console.log("页数:"+s);for(let n=1;n<=s;n++){let i=n;u.value.push({id:i})}for(let n=1;n<=s;n++)r.getPage(n).then(i=>{const d=document.getElementById("pdf_canvas_"+n),b=d.getContext("2d"),p=i.getViewport({scale:3});d.height=p.height,d.width=p.width;const f=150;d.style.width=f+"px",d.style.height=f*(p.height/p.width)+"px",i.render({canvasContext:b,viewport:p})})})}},B=()=>{const o=z.service({lock:!0,text:"正在处理...",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{let t=v.value,c=new ie,g=c.folder("images");u.value.forEach((r,s,n)=>{console.log("图片",r.id);let i=s+1;console.log(s);var d=document.getElementById("pdf_canvas_"+i);g.file(v.value+"-"+i+".png",T(d.toDataURL("image/png",1)),{base64:!0})}),c.generateAsync({type:"blob"}).then(function(r){ce.saveAs(r,t+".zip")}),o.close()},100)},T=o=>{var t=o.split(",");return t[1]};async function V(o){const t=z.service({lock:!0,text:"正在处理...",background:"rgba(0, 0, 0, 0.7)"});await P(o),k.value=!1,t.close()}const S=o=>{u.value.splice(o,1)},U=o=>{var t=document.getElementById("pdf_canvas_"+(o+1));let c=t.toDataURL("image/jpeg");E.value=c,x.value=!0},A=()=>{var o,t;(t=(o=I.value)==null?void 0:o.$.vnode.el)==null||t.click()};return(o,t)=>{const c=L,g=M,r=R,s=H,n=J,i=$,d=G,b=K,p=Q;return Y(),ee(te,null,[e(r,null,{default:a(()=>[e(c,null,{default:a(()=>[y("在线PDF转图片")]),_:1}),e(g,{name:"description",content:"将PDF转为图片"}),e(g,{name:"keywords",content:"图像,图片,转换,PDF,PDF转图片"})]),_:1}),l("div",de,[C(l("div",re,[pe,l("div",null,[e(n,{class:"upload-demo",drag:"","show-file-list":!1,"auto-upload":!1,onChange:V,accept:".pdf"},{default:a(()=>[l("div",me,[e(s,{ref_key:"uploadId",ref:I,style:{"font-size":"24px"},type:"primary",round:"",size:"large",icon:_(q)},{default:a(()=>[y("上传PDF")]),_:1},8,["icon"]),_e])]),_:1})])],512),[[F,k.value]]),C(l("div",ue,[l("div",ge,[e(d,{shadow:"always"},{default:a(()=>[e(_(se),{list:u.value,animation:100,"item-key":"id",class:"list-group",forceFallback:!0,"ghost-class":"ghost"},{item:a(({element:f,index:D})=>[l("div",fe,[l("canvas",{id:"pdf_canvas_"+(D+1),style:{border:"1px solid #eeeeee",float:"left"}},null,8,he),e(s,{type:"danger",class:"el-icon-close",onClick:N=>S(D),icon:_(O),circle:"",color:"#D6D6D6"},null,8,["onClick","icon"]),e(i,{class:"el-icon-yl",onClick:N=>U(D)},{default:a(()=>[e(_(j))]),_:2},1032,["onClick"])])]),_:1},8,["list"])]),_:1})]),e(p,null,{default:a(()=>[e(b,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=f=>x.value=f)},{default:a(()=>[l("img",{"w-full":"",src:E.value,style:{width:"100%"},alt:"Preview Image"},null,8,ve)]),_:1},8,["modelValue"])]),_:1}),l("div",ye,[e(d,{shadow:"always"},{default:a(()=>[e(s,{onClick:A,type:"success",style:{width:"100%"},size:"large"},{default:a(()=>[y("重新上传"),e(i,{class:"el-icon--right"},{default:a(()=>[e(_(W))]),_:1})]),_:1}),we,xe,e(s,{onClick:B,type:"primary",style:{width:"100%"},size:"large"},{default:a(()=>[y("打包下载 "),e(i,{class:"el-icon--right"},{default:a(()=>[e(_(Z))]),_:1})]),_:1})]),_:1})])],512),[[F,!k.value]])])],64)}}});const Ke=le(ke,[["__scopeId","data-v-7423f546"]]);export{Ke as default};
