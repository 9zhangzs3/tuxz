import{T as ee,M as te,H as oe}from"./components.b8cc7c2b.js";import{E as ae}from"./index.8f5bc808.js";import{E as le}from"./el-progress.1eae7595.js";import{E as ie,a as se}from"./el-tabs.1c3126a6.js";import{E as ne,p as re,n as ue,o as de,z as ce,s as me,v as pe,u as fe,a as _e}from"./constants.0737b991.js";import{E as ve}from"./el-color-picker.b52997f3.js";import{_ as ge}from"./client-only.80bd0e48.js";import{b as he,a as xe}from"./el-radio-group.65868cc8.js";import"./base.c054e6db.js";/* empty css                  *//* empty css                */import"./el-input.f8350fa5.js";import"./el-loading.b1ea91ae.js";import{d as be,ac as ye,r as n,k as we,l as Ce,q as a,s as i,v as r,m as l,z as V,A as M,B as p,F as ze,x as ke,y as Be,_ as Ee}from"./entry.89a8456c.js";import{f as Fe}from"./util.a9abac9b.js";import{W as Ne}from"./vue-cropper.es.09a17925.js";import{E as Se}from"./index.13bae289.js";import"./index.64d33a3b.js";import"./use-global-config.0787c757.js";import"./use-form-common-props.4add0763.js";import"./index.f8748455.js";import"./error.78e43d3e.js";import"./aria.60e0cdc6.js";import"./event.9519ab40.js";import"./vnode.76be746b.js";import"./index.22b79c03.js";import"./focus-trap.110fc0b9.js";import"./position.c4c9a777.js";import"./index.1ed0807d.js";import"./debounce.17f18a2b.js";import"./index.5eefbf66.js";const d=b=>(ke("data-v-59c0987b"),b=b(),Be(),b),Te={style:{width:"90%",margin:"0 auto"}},Ie={style:{width:"60%",margin:"0 auto","margin-top":"15%"}},Re=d(()=>l("div",{style:{"font-size":"24px",height:"50px"}},"智能抠图 / 制作证件照",-1)),Ve={style:{"margin-top":"10%","font-size":"24px"}},Me=d(()=>l("div",{style:{color:"black"}},"或者拖放一个文件",-1)),Ue={style:{width:"80%",margin:"0 auto","margin-top":"10%"}},De={style:{float:"left",width:"60%",position:"relative"}},$e={class:"cutout-image-container"},Le=["src"],He={class:"cutout-image-container"},Pe={style:{"text-align":"center"}},We=d(()=>l("div",{style:{width:"100%",height:"100%"}},null,-1)),je={style:{float:"right",width:"35%",height:"442px",margin:"0 auto"}},Ae={style:{height:"550px"}},Ge={style:{"margin-top":"0px"}},Oe={style:{"margin-top":"5px"}},qe=d(()=>l("span",{style:{"font-size":"10px"}}," 295*413px | 25*35mm",-1)),Je={style:{"margin-top":"5px"}},Ke=d(()=>l("span",{style:{"font-size":"10px"}}," 413*579px | 35*49mm",-1)),Qe={style:{"margin-top":"5px"}},Xe=d(()=>l("span",{style:{"font-size":"10px"}}," 260*378px | 22*32mm",-1)),Ye={style:{"margin-top":"5px"}},Ze=d(()=>l("span",{style:{"font-size":"10px"}}," 390*567px | 33*48mm",-1)),et={style:{"margin-top":"5px"}},tt=d(()=>l("span",{style:{"font-size":"10px"}}," 413*531px | 35*45mm",-1)),ot={style:{"margin-top":"5px"}},at=d(()=>l("span",{style:{"font-size":"10px"}}," 413*626px | 35*53mm",-1)),lt={style:{"margin-top":"5px"}},it=d(()=>l("span",{style:{"font-size":"10px"}}," 649*991px | 55*84mm",-1)),st={style:{"margin-top":"5px"}},nt=d(()=>l("span",{style:{"font-size":"10px"}}," 897*1204px | 76*102mm",-1)),rt={style:{"margin-top":"5px"}},ut=d(()=>l("span",{style:{"font-size":"10px"}}," 1050*1500px | 89*127mm",-1)),dt={style:{"margin-top":"5px"}},ct=d(()=>l("span",{style:{"font-size":"10px"}}," 1200*1800px | 102*152mm",-1)),mt={style:{width:"80%"}},pt=be({__name:"rembg",setup(b){const E=ye().public.baseURL,U=n(!0),s=n(),g=n("before"),C=n(!0),D=n(),z=n(),F=n(),k=n(),_=n(""),N=n(),$=n(["#000000","#0000FF","#FF0000","#90ee90","#00ced1","#1e90ff"]),S=n(),o=n({outputSize:1,outputType:"PNG",info:!0,canScale:!0,autoCrop:!1,autoCropWidth:300,autoCropHeight:300,fixed:!1,fixedNumber:[1,1],full:!0,fixedBox:!1,canMove:!0,canMoveBox:!0,original:!1,centerBox:!1,height:!1,infoTrue:!0,maxImgSize:3e3,enlarge:1,mode:"contain",limitMinSize:[10,10],minCropBoxWidth:10,minCropBoxHeight:10}),y=n(),T=n("bg"),L=async t=>{const e=Se.service({lock:!0,text:"正在处理...",background:"rgba(0, 0, 0, 0.7)"});g.value="before",_.value="",D.value=t.raw,C.value=!1,F.value=await Fe(t.raw),await H(t.raw),e.close()},H=async t=>{z.value=t;const e=new FormData;e.append("file",t),console.log(E);const f=await(await fetch(`${E}:5000/api/remove`,{method:"POST",body:e})).blob();k.value=URL.createObjectURL(f),S.value=k.value,U.value=!1,g.value="after"},P=t=>{const e=document.createElement("a");e.href=t,e.download=z.value.name,e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{e.remove()},100)},W=()=>{var t=new Image;o.value.autoCrop?s.value.getCropData(f=>{t.src=f,console.log(1)}):t.src=k.value;let e=document.createElement("canvas"),m=e.getContext("2d");t.onload=()=>{if(console.log(2),o.value.autoCrop){let x=q();x?(e.width=x[0],e.height=x[1]):(e.width=t.width,e.height=t.height)}else e.width=t.width,e.height=t.height;_&&(m.fillStyle=_.value),m.imageSmoothingEnabled=!1,m.fillRect(0,0,e.width,e.height),console.log(t.width,t.height,e.width,e.height),m.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height);var f=e.toDataURL(z.value.type,1);P(f)}},h=t=>{_.value=t,g.value="after";let e=document.getElementsByClassName("cropper-crop-box")[0];if(e.style.backgroundColor=t,!o.value.autoCrop){let m=document.getElementsByClassName("cropper-box-canvas")[0];m&&(m.style.backgroundColor=t)}},j=()=>{var t,e;(e=(t=N.value)==null?void 0:t.$.vnode.el)==null||e.click()},A=t=>!0,G=()=>{_.value="",y.value="",o.value.autoCrop=!1;let t=document.getElementsByClassName("cropper-crop-box")[0];t.style.backgroundColor="none";let e=document.getElementsByClassName("cropper-box-canvas")[0];e.style.backgroundColor="none",s.value.refresh()},O=t=>{if(!t)return;let e=document.getElementsByClassName("cropper-box-canvas")[0];e.style.backgroundColor="none",o.value.autoCrop=!0,t=="custom"?(o.value.fixedNumber=[1,1],o.value.fixed=!1,o.value.fixedBox=!1,o.value.info=!0,s.value.refresh()):(o.value.fixed=!0,o.value.fixedBox=!0,o.value.info=!1),t=="1c"&&(o.value.fixedNumber=[1,1.4],s.value.refresh()),t=="2c"&&(o.value.fixedNumber=[1,1.6],s.value.refresh()),t=="x1c"&&(o.value.fixedNumber=[1,1.453],s.value.refresh()),t=="d1c"&&(o.value.fixedNumber=[1,1.453],s.value.refresh()),t=="x2c"&&(o.value.fixedNumber=[1,1.285],s.value.refresh()),t=="d2c"&&(o.value.fixedNumber=[1,1.5175],s.value.refresh()),t=="3c"&&(o.value.fixedNumber=[1,1.527],s.value.refresh()),t=="4c"&&(o.value.fixedNumber=[1,1.342],s.value.refresh()),t=="5c"&&(o.value.fixedNumber=[1,1.428],s.value.refresh()),t=="6c"&&(o.value.fixedNumber=[1,1.5],s.value.refresh())},q=()=>{let t=y.value,e=null;return t=="1c"&&(e=[295,413]),t=="2c"&&(e=[413,579]),t=="x1c"&&(e=[260,378]),t=="d1c"&&(e=[390,567]),t=="x2c"&&(e=[413,531]),t=="d2c"&&(e=[413,626]),t=="3c"&&(e=[649,991]),t=="4c"&&(e=[897,1204]),t=="5c"&&(e=[1050,1500]),t=="6c"&&(e=[1200,1800]),e},J=()=>{s.value.rotateRight()},K=()=>{s.value.rotateLeft()},I=t=>{t=t||1,s.value.changeScale(t)};return(t,e)=>{const m=ee,f=te,x=oe,B=ae,Q=le,w=ie,v=ne,R=se,X=ve,Y=ge,c=he,Z=xe;return we(),Ce(ze,null,[a(x,null,{default:i(()=>[a(m,null,{default:i(()=>[r("智能抠图")]),_:1}),a(f,{name:"description",content:"在线抠图去背景"}),a(f,{name:"keywords",content:"图片,抠图,去背景,证件照制作"})]),_:1}),l("div",Te,[V(l("div",Ie,[Re,l("div",null,[a(Q,{class:"upload-demo",drag:"","show-file-list":!1,"auto-upload":!1,onChange:L,accept:".gif,.tif,.tiff,.png,.crw,.cr2,.dng,.raf,.nef,.nrw,.orf,.rw2,.pef,.arw,.srf,.sr2,.raw,.psd,.svg,.webp,.heic,.avif,.jpg,.jpeg"},{default:i(()=>[l("div",Ve,[a(B,{ref_key:"uploadRembgId",ref:N,style:{"font-size":"24px"},type:"primary",round:"",size:"large",icon:p(re)},{default:i(()=>[r("上传图片")]),_:1},8,["icon"]),Me])]),_:1})])],512),[[M,C.value]]),V(l("div",Ue,[l("div",De,[a(R,{onTabChange:A,modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=u=>g.value=u),type:"card",style:{width:"100%"}},{default:i(()=>[a(w,{name:"before",label:"抠图前"},{default:i(()=>[l("div",$e,[l("img",{src:F.value,style:{"max-width":"100%","max-height":"100%",display:"block"}},null,8,Le)])]),_:1}),a(w,{name:"after",label:"抠图后"},{default:i(()=>[l("div",He,[a(p(Ne),{ref_key:"cropper",ref:s,style:{"max-width":"1000px",height:"550px","background-image":"none"},img:S.value,"output-type":o.value.outputType,"output-size":o.value.outputSize,info:o.value.info,"can-scale":o.value.canScale,"auto-crop":o.value.autoCrop,"auto-crop-width":o.value.autoCropWidth,"auto-crop-height":o.value.autoCropHeight,fixed:o.value.fixed,"fixed-number":o.value.fixedNumber,full:o.value.full,"fixed-box":o.value.fixedBox,"can-move":o.value.canMove,"can-move-box":o.value.canMoveBox,original:o.value.original,"center-box":o.value.centerBox,height:o.value.height,"info-true":o.value.infoTrue,"max-img-size":o.value.maxImgSize,enlarge:o.value.enlarge,mode:o.value.mode,"limit-min-size":o.value.limitMinSize},null,8,["img","output-type","output-size","info","can-scale","auto-crop","auto-crop-width","auto-crop-height","fixed","fixed-number","full","fixed-box","can-move","can-move-box","original","center-box","height","info-true","max-img-size","enlarge","mode","limit-min-size"])]),l("div",Pe,[a(v,{color:"#838282FF",onClick:K},{default:i(()=>[a(p(ue))]),_:1}),a(v,{color:"#838282FF",onClick:J},{default:i(()=>[a(p(de))]),_:1}),a(v,{color:"#838282FF",onClick:e[0]||(e[0]=u=>I(1))},{default:i(()=>[a(p(ce))]),_:1}),a(v,{color:"#838282FF",onClick:e[1]||(e[1]=u=>I(-1))},{default:i(()=>[a(p(me))]),_:1}),a(v,{color:"#838282FF",onClick:e[2]||(e[2]=u=>G())},{default:i(()=>[a(p(pe))]),_:1})])]),_:1}),We]),_:1},8,["modelValue"]),a(B,{type:"primary",onClick:j,style:{position:"absolute",top:"5px",right:"0"},icon:p(fe)},{default:i(()=>[r("重新上传")]),_:1},8,["icon"])]),l("div",je,[l("div",Ae,[a(R,{class:"demo-tabs",modelValue:T.value,"onUpdate:modelValue":e[10]||(e[10]=u=>T.value=u)},{default:i(()=>[a(w,{label:"背景",name:"bg"},{default:i(()=>[a(Y,null,{default:i(()=>[l("div",{onClick:e[4]||(e[4]=u=>h("")),class:"bgColor cutout-image-container"}),l("div",{onClick:e[5]||(e[5]=u=>h("#ffffff")),class:"bgColor",style:{"background-color":"white"}}),l("div",{onClick:e[6]||(e[6]=u=>h("#0000FF")),class:"bgColor",style:{"background-color":"blue"}}),l("div",{onClick:e[7]||(e[7]=u=>h("#FF0000")),class:"bgColor",style:{"background-color":"red"}}),a(X,{onActiveChange:h,style:{"margin-left":"5px"},size:"large",modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=u=>_.value=u),"color-format":"hex","show-alpha":!1,predefine:$.value},null,8,["modelValue","predefine"])]),_:1})]),_:1}),a(w,{label:"尺寸",name:"size"},{default:i(()=>[a(Z,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=u=>y.value=u),size:"large",onChange:O},{default:i(()=>[l("div",Ge,[a(c,{style:{width:"100%"},label:"custom",name:"custom"},{default:i(()=>[r("自定义")]),_:1})]),l("div",Oe,[a(c,{style:{width:"100%"},label:"1c",name:"1c"},{default:i(()=>[r("一寸"),qe]),_:1})]),l("div",Je,[a(c,{style:{width:"100%"},label:"2c",name:"2c"},{default:i(()=>[r("二寸"),Ke]),_:1})]),l("div",Qe,[a(c,{style:{width:"100%"},label:"x1c",name:"x1c"},{default:i(()=>[r("小一寸"),Xe]),_:1})]),l("div",Ye,[a(c,{style:{width:"100%"},label:"d1c",name:"d1c"},{default:i(()=>[r("大一寸"),Ze]),_:1})]),l("div",et,[a(c,{style:{width:"100%"},label:"x2c",name:"x2c"},{default:i(()=>[r("小二寸"),tt]),_:1})]),l("div",ot,[a(c,{style:{width:"100%"},label:"d2c",name:"d2c"},{default:i(()=>[r("大二寸"),at]),_:1})]),l("div",lt,[a(c,{style:{width:"100%"},label:"3c",name:"3c"},{default:i(()=>[r("三寸"),it]),_:1})]),l("div",st,[a(c,{style:{width:"100%"},label:"4c",name:"4c"},{default:i(()=>[r("四寸"),nt]),_:1})]),l("div",rt,[a(c,{style:{width:"100%"},label:"5c",name:"5c"},{default:i(()=>[r("五寸"),ut]),_:1})]),l("div",dt,[a(c,{style:{width:"100%"},label:"6c",name:"6c"},{default:i(()=>[r("六寸"),ct]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),l("div",mt,[a(B,{onClick:W,type:"primary",style:{width:"100%"},size:"large"},{default:i(()=>[a(v,{class:"el-icon--right"},{default:i(()=>[a(p(_e))]),_:1}),r("下载 ")]),_:1})])])],512),[[M,!C.value]])])],64)}}});const Gt=Ee(pt,[["__scopeId","data-v-59c0987b"]]);export{Gt as default};
