import{d as B,J as W,c as R,ao as Xt,V as ke,k as T,l as P,L as $,B as a,m as D,C as x,Q as F,t as ae,S,E as I,s as U,R as Yt,ap as j,r as gt,F as Jt,H as Qt,a9 as yt,aa as z,q as k,as as Zt,X as Vt,I as er,ag as he,U as De,M as Be,Z as tr,b as rr,N as nr,K as ar,at as Me,a2 as Ne}from"./entry.43ae2c8f.js";import{O as sr,P as vt,L as or,Q as bt,A as mt,E as G,H as ht,R as ir,z as lr,q as ur,S as cr}from"./constants.d98b03ae.js";import{b as Y,d as A,_ as te,w as $t,m as $e}from"./base.cee28e3a.js";import{t as Oe,d as fr}from"./error.78e43d3e.js";import{x as ce,y as H,i as Pe,l as dr,z as Tt,m as pr,c as K,f as fe,A as gr,b as V,a as yr,L as je,M as se,B as wt,C as J,S as oe,e as vr,r as br,p as de,D as mr}from"./use-form-common-props.7f01f78a.js";var hr=ce(H,"WeakMap");const Te=hr;var xe=Object.create,$r=function(){function e(){}return function(t){if(!Pe(t))return{};if(xe)return xe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Tr=$r;function wr(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function _r(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function pe(e,t,r,n){var f=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var v=t[s],y=n?n(r[v],e[v],v,r,e):void 0;y===void 0&&(y=e[v]),f?dr(r,v,y):Tt(r,v,y)}return r}var Ar=9007199254740991;function _t(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ar}function At(e){return e!=null&&_t(e.length)&&!pr(e)}var Sr=Object.prototype;function Le(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Sr;return e===r}function Er(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Or="[object Arguments]";function Ge(e){return K(e)&&fe(e)==Or}var St=Object.prototype,Pr=St.hasOwnProperty,jr=St.propertyIsEnumerable,Lr=Ge(function(){return arguments}())?Ge:function(e){return K(e)&&Pr.call(e,"callee")&&!jr.call(e,"callee")};const Cr=Lr;function Rr(){return!1}var Et=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qe=Et&&typeof module=="object"&&module&&!module.nodeType&&module,Fr=qe&&qe.exports===Et,Ke=Fr?H.Buffer:void 0,Ur=Ke?Ke.isBuffer:void 0,Ir=Ur||Rr;const ie=Ir;var kr="[object Arguments]",Dr="[object Array]",Br="[object Boolean]",Mr="[object Date]",Nr="[object Error]",xr="[object Function]",Gr="[object Map]",qr="[object Number]",Kr="[object Object]",Hr="[object RegExp]",Wr="[object Set]",zr="[object String]",Xr="[object WeakMap]",Yr="[object ArrayBuffer]",Jr="[object DataView]",Qr="[object Float32Array]",Zr="[object Float64Array]",Vr="[object Int8Array]",en="[object Int16Array]",tn="[object Int32Array]",rn="[object Uint8Array]",nn="[object Uint8ClampedArray]",an="[object Uint16Array]",sn="[object Uint32Array]",_={};_[Qr]=_[Zr]=_[Vr]=_[en]=_[tn]=_[rn]=_[nn]=_[an]=_[sn]=!0;_[kr]=_[Dr]=_[Yr]=_[Br]=_[Jr]=_[Mr]=_[Nr]=_[xr]=_[Gr]=_[qr]=_[Kr]=_[Hr]=_[Wr]=_[zr]=_[Xr]=!1;function on(e){return K(e)&&_t(e.length)&&!!_[fe(e)]}function Ce(e){return function(t){return e(t)}}var Ot=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z=Ot&&typeof module=="object"&&module&&!module.nodeType&&module,ln=Z&&Z.exports===Ot,be=ln&&gr.process,un=function(){try{var e=Z&&Z.require&&Z.require("util").types;return e||be&&be.binding&&be.binding("util")}catch{}}();const X=un;var He=X&&X.isTypedArray,cn=He?Ce(He):on;const Pt=cn;var fn=Object.prototype,dn=fn.hasOwnProperty;function jt(e,t){var r=V(e),n=!r&&Cr(e),f=!r&&!n&&ie(e),s=!r&&!n&&!f&&Pt(e),l=r||n||f||s,v=l?Er(e.length,String):[],y=v.length;for(var u in e)(t||dn.call(e,u))&&!(l&&(u=="length"||f&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||yr(u,y)))&&v.push(u);return v}function Lt(e,t){return function(r){return e(t(r))}}var pn=Lt(Object.keys,Object);const gn=pn;var yn=Object.prototype,vn=yn.hasOwnProperty;function bn(e){if(!Le(e))return gn(e);var t=[];for(var r in Object(e))vn.call(e,r)&&r!="constructor"&&t.push(r);return t}function Re(e){return At(e)?jt(e):bn(e)}function mn(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var hn=Object.prototype,$n=hn.hasOwnProperty;function Tn(e){if(!Pe(e))return mn(e);var t=Le(e),r=[];for(var n in e)n=="constructor"&&(t||!$n.call(e,n))||r.push(n);return r}function Fe(e){return At(e)?jt(e,!0):Tn(e)}function Ct(e,t){for(var r=-1,n=t.length,f=e.length;++r<n;)e[f+r]=t[r];return e}var wn=Lt(Object.getPrototypeOf,Object);const Rt=wn;function _n(){this.__data__=new je,this.size=0}function An(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Sn(e){return this.__data__.get(e)}function En(e){return this.__data__.has(e)}var On=200;function Pn(e,t){var r=this.__data__;if(r instanceof je){var n=r.__data__;if(!se||n.length<On-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new wt(n)}return r.set(e,t),this.size=r.size,this}function M(e){var t=this.__data__=new je(e);this.size=t.size}M.prototype.clear=_n;M.prototype.delete=An;M.prototype.get=Sn;M.prototype.has=En;M.prototype.set=Pn;function jn(e,t){return e&&pe(t,Re(t),e)}function Ln(e,t){return e&&pe(t,Fe(t),e)}var Ft=typeof exports=="object"&&exports&&!exports.nodeType&&exports,We=Ft&&typeof module=="object"&&module&&!module.nodeType&&module,Cn=We&&We.exports===Ft,ze=Cn?H.Buffer:void 0,Xe=ze?ze.allocUnsafe:void 0;function Rn(e,t){if(t)return e.slice();var r=e.length,n=Xe?Xe(r):new e.constructor(r);return e.copy(n),n}function Fn(e,t){for(var r=-1,n=e==null?0:e.length,f=0,s=[];++r<n;){var l=e[r];t(l,r,e)&&(s[f++]=l)}return s}function Ut(){return[]}var Un=Object.prototype,In=Un.propertyIsEnumerable,Ye=Object.getOwnPropertySymbols,kn=Ye?function(e){return e==null?[]:(e=Object(e),Fn(Ye(e),function(t){return In.call(e,t)}))}:Ut;const Ue=kn;function Dn(e,t){return pe(e,Ue(e),t)}var Bn=Object.getOwnPropertySymbols,Mn=Bn?function(e){for(var t=[];e;)Ct(t,Ue(e)),e=Rt(e);return t}:Ut;const It=Mn;function Nn(e,t){return pe(e,It(e),t)}function kt(e,t,r){var n=t(e);return V(e)?n:Ct(n,r(e))}function we(e){return kt(e,Re,Ue)}function xn(e){return kt(e,Fe,It)}var Gn=ce(H,"DataView");const _e=Gn;var qn=ce(H,"Promise");const Ae=qn;var Kn=ce(H,"Set");const Se=Kn;var Je="[object Map]",Hn="[object Object]",Qe="[object Promise]",Ze="[object Set]",Ve="[object WeakMap]",et="[object DataView]",Wn=J(_e),zn=J(se),Xn=J(Ae),Yn=J(Se),Jn=J(Te),q=fe;(_e&&q(new _e(new ArrayBuffer(1)))!=et||se&&q(new se)!=Je||Ae&&q(Ae.resolve())!=Qe||Se&&q(new Se)!=Ze||Te&&q(new Te)!=Ve)&&(q=function(e){var t=fe(e),r=t==Hn?e.constructor:void 0,n=r?J(r):"";if(n)switch(n){case Wn:return et;case zn:return Je;case Xn:return Qe;case Yn:return Ze;case Jn:return Ve}return t});const ee=q;var Qn=Object.prototype,Zn=Qn.hasOwnProperty;function Vn(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Zn.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ea=H.Uint8Array;const le=ea;function Ie(e){var t=new e.constructor(e.byteLength);return new le(t).set(new le(e)),t}function ta(e,t){var r=t?Ie(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ra=/\w*$/;function na(e){var t=new e.constructor(e.source,ra.exec(e));return t.lastIndex=e.lastIndex,t}var tt=oe?oe.prototype:void 0,rt=tt?tt.valueOf:void 0;function aa(e){return rt?Object(rt.call(e)):{}}function sa(e,t){var r=t?Ie(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var oa="[object Boolean]",ia="[object Date]",la="[object Map]",ua="[object Number]",ca="[object RegExp]",fa="[object Set]",da="[object String]",pa="[object Symbol]",ga="[object ArrayBuffer]",ya="[object DataView]",va="[object Float32Array]",ba="[object Float64Array]",ma="[object Int8Array]",ha="[object Int16Array]",$a="[object Int32Array]",Ta="[object Uint8Array]",wa="[object Uint8ClampedArray]",_a="[object Uint16Array]",Aa="[object Uint32Array]";function Sa(e,t,r){var n=e.constructor;switch(t){case ga:return Ie(e);case oa:case ia:return new n(+e);case ya:return ta(e,r);case va:case ba:case ma:case ha:case $a:case Ta:case wa:case _a:case Aa:return sa(e,r);case la:return new n;case ua:case da:return new n(e);case ca:return na(e);case fa:return new n;case pa:return aa(e)}}function Ea(e){return typeof e.constructor=="function"&&!Le(e)?Tr(Rt(e)):{}}var Oa="[object Map]";function Pa(e){return K(e)&&ee(e)==Oa}var nt=X&&X.isMap,ja=nt?Ce(nt):Pa;const La=ja;var Ca="[object Set]";function Ra(e){return K(e)&&ee(e)==Ca}var at=X&&X.isSet,Fa=at?Ce(at):Ra;const Ua=Fa;var Ia=1,ka=2,Da=4,Dt="[object Arguments]",Ba="[object Array]",Ma="[object Boolean]",Na="[object Date]",xa="[object Error]",Bt="[object Function]",Ga="[object GeneratorFunction]",qa="[object Map]",Ka="[object Number]",Mt="[object Object]",Ha="[object RegExp]",Wa="[object Set]",za="[object String]",Xa="[object Symbol]",Ya="[object WeakMap]",Ja="[object ArrayBuffer]",Qa="[object DataView]",Za="[object Float32Array]",Va="[object Float64Array]",es="[object Int8Array]",ts="[object Int16Array]",rs="[object Int32Array]",ns="[object Uint8Array]",as="[object Uint8ClampedArray]",ss="[object Uint16Array]",os="[object Uint32Array]",w={};w[Dt]=w[Ba]=w[Ja]=w[Qa]=w[Ma]=w[Na]=w[Za]=w[Va]=w[es]=w[ts]=w[rs]=w[qa]=w[Ka]=w[Mt]=w[Ha]=w[Wa]=w[za]=w[Xa]=w[ns]=w[as]=w[ss]=w[os]=!0;w[xa]=w[Bt]=w[Ya]=!1;function ne(e,t,r,n,f,s){var l,v=t&Ia,y=t&ka,u=t&Da;if(r&&(l=f?r(e,n,f,s):r(e)),l!==void 0)return l;if(!Pe(e))return e;var h=V(e);if(h){if(l=Vn(e),!v)return wr(e,l)}else{var b=ee(e),i=b==Bt||b==Ga;if(ie(e))return Rn(e,v);if(b==Mt||b==Dt||i&&!f){if(l=y||i?{}:Ea(e),!v)return y?Nn(e,Ln(l,e)):Dn(e,jn(l,e))}else{if(!w[b])return f?e:{};l=Sa(e,b,v)}}s||(s=new M);var p=s.get(e);if(p)return p;s.set(e,l),Ua(e)?e.forEach(function(m){l.add(ne(m,t,r,m,e,s))}):La(e)&&e.forEach(function(m,c){l.set(c,ne(m,t,r,c,e,s))});var o=u?y?xn:we:y?Fe:Re,g=h?void 0:o(e);return _r(g||e,function(m,c){g&&(c=m,m=e[c]),Tt(l,c,ne(m,t,r,c,e,s))}),l}var is=1,ls=4;function st(e){return ne(e,is|ls)}var us="__lodash_hash_undefined__";function cs(e){return this.__data__.set(e,us),this}function fs(e){return this.__data__.has(e)}function ue(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new wt;++t<r;)this.add(e[t])}ue.prototype.add=ue.prototype.push=cs;ue.prototype.has=fs;function ds(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ps(e,t){return e.has(t)}var gs=1,ys=2;function Nt(e,t,r,n,f,s){var l=r&gs,v=e.length,y=t.length;if(v!=y&&!(l&&y>v))return!1;var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var b=-1,i=!0,p=r&ys?new ue:void 0;for(s.set(e,t),s.set(t,e);++b<v;){var o=e[b],g=t[b];if(n)var m=l?n(g,o,b,t,e,s):n(o,g,b,e,t,s);if(m!==void 0){if(m)continue;i=!1;break}if(p){if(!ds(t,function(c,E){if(!ps(p,E)&&(o===c||f(o,c,r,n,s)))return p.push(E)})){i=!1;break}}else if(!(o===g||f(o,g,r,n,s))){i=!1;break}}return s.delete(e),s.delete(t),i}function vs(e){var t=-1,r=Array(e.size);return e.forEach(function(n,f){r[++t]=[f,n]}),r}function bs(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ms=1,hs=2,$s="[object Boolean]",Ts="[object Date]",ws="[object Error]",_s="[object Map]",As="[object Number]",Ss="[object RegExp]",Es="[object Set]",Os="[object String]",Ps="[object Symbol]",js="[object ArrayBuffer]",Ls="[object DataView]",ot=oe?oe.prototype:void 0,me=ot?ot.valueOf:void 0;function Cs(e,t,r,n,f,s,l){switch(r){case Ls:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case js:return!(e.byteLength!=t.byteLength||!s(new le(e),new le(t)));case $s:case Ts:case As:return vr(+e,+t);case ws:return e.name==t.name&&e.message==t.message;case Ss:case Os:return e==t+"";case _s:var v=vs;case Es:var y=n&ms;if(v||(v=bs),e.size!=t.size&&!y)return!1;var u=l.get(e);if(u)return u==t;n|=hs,l.set(e,t);var h=Nt(v(e),v(t),n,f,s,l);return l.delete(e),h;case Ps:if(me)return me.call(e)==me.call(t)}return!1}var Rs=1,Fs=Object.prototype,Us=Fs.hasOwnProperty;function Is(e,t,r,n,f,s){var l=r&Rs,v=we(e),y=v.length,u=we(t),h=u.length;if(y!=h&&!l)return!1;for(var b=y;b--;){var i=v[b];if(!(l?i in t:Us.call(t,i)))return!1}var p=s.get(e),o=s.get(t);if(p&&o)return p==t&&o==e;var g=!0;s.set(e,t),s.set(t,e);for(var m=l;++b<y;){i=v[b];var c=e[i],E=t[i];if(n)var d=l?n(E,c,i,t,e,s):n(c,E,i,e,t,s);if(!(d===void 0?c===E||f(c,E,r,n,s):d)){g=!1;break}m||(m=i=="constructor")}if(g&&!m){var O=e.constructor,L=t.constructor;O!=L&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof L=="function"&&L instanceof L)&&(g=!1)}return s.delete(e),s.delete(t),g}var ks=1,it="[object Arguments]",lt="[object Array]",re="[object Object]",Ds=Object.prototype,ut=Ds.hasOwnProperty;function Bs(e,t,r,n,f,s){var l=V(e),v=V(t),y=l?lt:ee(e),u=v?lt:ee(t);y=y==it?re:y,u=u==it?re:u;var h=y==re,b=u==re,i=y==u;if(i&&ie(e)){if(!ie(t))return!1;l=!0,h=!1}if(i&&!h)return s||(s=new M),l||Pt(e)?Nt(e,t,r,n,f,s):Cs(e,t,y,r,n,f,s);if(!(r&ks)){var p=h&&ut.call(e,"__wrapped__"),o=b&&ut.call(t,"__wrapped__");if(p||o){var g=p?e.value():e,m=o?t.value():t;return s||(s=new M),f(g,m,r,n,s)}}return i?(s||(s=new M),Is(e,t,r,n,f,s)):!1}function xt(e,t,r,n,f){return e===t?!0:e==null||t==null||!K(e)&&!K(t)?e!==e&&t!==t:Bs(e,t,r,n,xt,f)}function Ms(e,t){return xt(e,t)}const Ns=Y({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:A(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:A([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:A(Function),default:e=>`${e}%`}}),xs=["aria-valuenow"],Gs={viewBox:"0 0 100 100"},qs=["d","stroke","stroke-linecap","stroke-width"],Ks=["d","stroke","opacity","stroke-linecap","stroke-width"],Hs={key:0},Ws=B({name:"ElProgress"}),zs=B({...Ws,props:Ns,setup(e){const t=e,r={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=W("progress"),f=R(()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:E(t.percentage)})),s=R(()=>(t.strokeWidth/t.width*100).toFixed(1)),l=R(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),v=R(()=>{const d=l.value,O=t.type==="dashboard";return`
          M 50 50
          m 0 ${O?"":"-"}${d}
          a ${d} ${d} 0 1 1 0 ${O?"-":""}${d*2}
          a ${d} ${d} 0 1 1 0 ${O?"":"-"}${d*2}
          `}),y=R(()=>2*Math.PI*l.value),u=R(()=>t.type==="dashboard"?.75:1),h=R(()=>`${-1*y.value*(1-u.value)/2}px`),b=R(()=>({strokeDasharray:`${y.value*u.value}px, ${y.value}px`,strokeDashoffset:h.value})),i=R(()=>({strokeDasharray:`${y.value*u.value*(t.percentage/100)}px, ${y.value}px`,strokeDashoffset:h.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=R(()=>{let d;return t.color?d=E(t.percentage):d=r[t.status]||r.default,d}),o=R(()=>t.status==="warning"?sr:t.type==="line"?t.status==="success"?vt:or:t.status==="success"?bt:mt),g=R(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),m=R(()=>t.format(t.percentage));function c(d){const O=100/d.length;return d.map((C,N)=>ke(C)?{color:C,percentage:(N+1)*O}:C).sort((C,N)=>C.percentage-N.percentage)}const E=d=>{var O;const{color:L}=t;if(Xt(L))return L(d);if(ke(L))return L;{const C=c(L);for(const N of C)if(N.percentage>d)return N.color;return(O=C[C.length-1])==null?void 0:O.color}};return(d,O)=>(T(),P("div",{class:$([a(n).b(),a(n).m(d.type),a(n).is(d.status),{[a(n).m("without-text")]:!d.showText,[a(n).m("text-inside")]:d.textInside}]),role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[d.type==="line"?(T(),P("div",{key:0,class:$(a(n).b("bar"))},[D("div",{class:$(a(n).be("bar","outer")),style:x({height:`${d.strokeWidth}px`})},[D("div",{class:$([a(n).be("bar","inner"),{[a(n).bem("bar","inner","indeterminate")]:d.indeterminate},{[a(n).bem("bar","inner","striped")]:d.striped},{[a(n).bem("bar","inner","striped-flow")]:d.stripedFlow}]),style:x(a(f))},[(d.showText||d.$slots.default)&&d.textInside?(T(),P("div",{key:0,class:$(a(n).be("bar","innerText"))},[F(d.$slots,"default",{percentage:d.percentage},()=>[D("span",null,ae(a(m)),1)])],2)):S("v-if",!0)],6)],6)],2)):(T(),P("div",{key:1,class:$(a(n).b("circle")),style:x({height:`${d.width}px`,width:`${d.width}px`})},[(T(),P("svg",Gs,[D("path",{class:$(a(n).be("circle","track")),d:a(v),stroke:`var(${a(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":d.strokeLinecap,"stroke-width":a(s),fill:"none",style:x(a(b))},null,14,qs),D("path",{class:$(a(n).be("circle","path")),d:a(v),stroke:a(p),fill:"none",opacity:d.percentage?1:0,"stroke-linecap":d.strokeLinecap,"stroke-width":a(s),style:x(a(i))},null,14,Ks)]))],6)),(d.showText||d.$slots.default)&&!d.textInside?(T(),P("div",{key:2,class:$(a(n).e("text")),style:x({fontSize:`${a(g)}px`})},[F(d.$slots,"default",{percentage:d.percentage},()=>[d.status?(T(),I(a(G),{key:1},{default:U(()=>[(T(),I(Yt(a(o))))]),_:1})):(T(),P("span",Hs,ae(a(m)),1))])],6)):S("v-if",!0)],10,xs))}});var Xs=te(zs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ys=$t(Xs),Gt=Symbol("uploadContextKey"),Js="ElUpload";class Qs extends Error{constructor(t,r,n,f){super(t),this.name="UploadAjaxError",this.status=r,this.method=n,this.url=f}}function ct(e,t,r){let n;return r.response?n=`${r.response.error||r.response}`:r.responseText?n=`${r.responseText}`:n=`fail to ${t.method} ${e} ${r.status}`,new Qs(n,r.status,t.method,e)}function Zs(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const Vs=e=>{typeof XMLHttpRequest>"u"&&Oe(Js,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,r=e.action;t.upload&&t.upload.addEventListener("progress",s=>{const l=s;l.percent=s.total>0?s.loaded/s.total*100:0,e.onProgress(l)});const n=new FormData;if(e.data)for(const[s,l]of Object.entries(e.data))Array.isArray(l)?n.append(s,...l):n.append(s,l);n.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(ct(r,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(ct(r,e,t));e.onSuccess(Zs(t))}),t.open(e.method,r,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const f=e.headers||{};if(f instanceof Headers)f.forEach((s,l)=>t.setRequestHeader(l,s));else for(const[s,l]of Object.entries(f))ht(l)||t.setRequestHeader(s,String(l));return t.send(n),t},qt=["text","picture","picture-card"];let eo=1;const Ee=()=>Date.now()+eo++,Kt=Y({action:{type:String,default:"#"},headers:{type:A(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>$e({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:A(Array),default:()=>$e([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:qt,default:"text"},httpRequest:{type:A(Function),default:Vs},disabled:Boolean,limit:Number}),to=Y({...Kt,beforeUpload:{type:A(Function),default:j},beforeRemove:{type:A(Function)},onRemove:{type:A(Function),default:j},onChange:{type:A(Function),default:j},onPreview:{type:A(Function),default:j},onSuccess:{type:A(Function),default:j},onProgress:{type:A(Function),default:j},onError:{type:A(Function),default:j},onExceed:{type:A(Function),default:j}}),ro=Y({files:{type:A(Array),default:()=>$e([])},disabled:{type:Boolean,default:!1},handlePreview:{type:A(Function),default:j},listType:{type:String,values:qt,default:"text"}}),no={remove:e=>!!e},ao=["onKeydown"],so=["src"],oo=["onClick"],io=["title"],lo=["onClick"],uo=["onClick"],co=B({name:"ElUploadList"}),fo=B({...co,props:ro,emits:no,setup(e,{emit:t}){const{t:r}=br(),n=W("upload"),f=W("icon"),s=W("list"),l=de(),v=gt(!1),y=u=>{t("remove",u)};return(u,h)=>(T(),I(Zt,{tag:"ul",class:$([a(n).b("list"),a(n).bm("list",u.listType),a(n).is("disabled",a(l))]),name:a(s).b()},{default:U(()=>[(T(!0),P(Jt,null,Qt(u.files,b=>(T(),P("li",{key:b.uid||b.name,class:$([a(n).be("list","item"),a(n).is(b.status),{focusing:v.value}]),tabindex:"0",onKeydown:yt(i=>!a(l)&&y(b),["delete"]),onFocus:h[0]||(h[0]=i=>v.value=!0),onBlur:h[1]||(h[1]=i=>v.value=!1),onClick:h[2]||(h[2]=i=>v.value=!1)},[F(u.$slots,"default",{file:b},()=>[u.listType==="picture"||b.status!=="uploading"&&u.listType==="picture-card"?(T(),P("img",{key:0,class:$(a(n).be("list","item-thumbnail")),src:b.url,alt:""},null,10,so)):S("v-if",!0),b.status==="uploading"||u.listType!=="picture-card"?(T(),P("div",{key:1,class:$(a(n).be("list","item-info"))},[D("a",{class:$(a(n).be("list","item-name")),onClick:z(i=>u.handlePreview(b),["prevent"])},[k(a(G),{class:$(a(f).m("document"))},{default:U(()=>[k(a(ir))]),_:1},8,["class"]),D("span",{class:$(a(n).be("list","item-file-name")),title:b.name},ae(b.name),11,io)],10,oo),b.status==="uploading"?(T(),I(a(Ys),{key:0,type:u.listType==="picture-card"?"circle":"line","stroke-width":u.listType==="picture-card"?6:2,percentage:Number(b.percentage),style:x(u.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):S("v-if",!0)],2)):S("v-if",!0),D("label",{class:$(a(n).be("list","item-status-label"))},[u.listType==="text"?(T(),I(a(G),{key:0,class:$([a(f).m("upload-success"),a(f).m("circle-check")])},{default:U(()=>[k(a(vt))]),_:1},8,["class"])):["picture-card","picture"].includes(u.listType)?(T(),I(a(G),{key:1,class:$([a(f).m("upload-success"),a(f).m("check")])},{default:U(()=>[k(a(bt))]),_:1},8,["class"])):S("v-if",!0)],2),a(l)?S("v-if",!0):(T(),I(a(G),{key:2,class:$(a(f).m("close")),onClick:i=>y(b)},{default:U(()=>[k(a(mt))]),_:2},1032,["class","onClick"])),S(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),S(" This is a bug which needs to be fixed "),S(" TODO: Fix the incorrect navigation interaction "),a(l)?S("v-if",!0):(T(),P("i",{key:3,class:$(a(f).m("close-tip"))},ae(a(r)("el.upload.deleteTip")),3)),u.listType==="picture-card"?(T(),P("span",{key:4,class:$(a(n).be("list","item-actions"))},[D("span",{class:$(a(n).be("list","item-preview")),onClick:i=>u.handlePreview(b)},[k(a(G),{class:$(a(f).m("zoom-in"))},{default:U(()=>[k(a(lr))]),_:1},8,["class"])],10,lo),a(l)?S("v-if",!0):(T(),P("span",{key:0,class:$(a(n).be("list","item-delete")),onClick:i=>y(b)},[k(a(G),{class:$(a(f).m("delete"))},{default:U(()=>[k(a(ur))]),_:1},8,["class"])],10,uo))],2)):S("v-if",!0)])],42,ao))),128)),F(u.$slots,"append")]),_:3},8,["class","name"]))}});var ft=te(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const po=Y({disabled:{type:Boolean,default:!1}}),go={file:e=>Vt(e)},yo=["onDrop","onDragover"],Ht="ElUploadDrag",vo=B({name:Ht}),bo=B({...vo,props:po,emits:go,setup(e,{emit:t}){const r=er(Gt);r||Oe(Ht,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=W("upload"),f=gt(!1),s=de(),l=y=>{if(s.value)return;f.value=!1,y.stopPropagation();const u=Array.from(y.dataTransfer.files),h=r.accept.value;if(!h){t("file",u);return}const b=u.filter(i=>{const{type:p,name:o}=i,g=o.includes(".")?`.${o.split(".").pop()}`:"",m=p.replace(/\/.*$/,"");return h.split(",").map(c=>c.trim()).filter(c=>c).some(c=>c.startsWith(".")?g===c:/\/\*$/.test(c)?m===c.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(c)?p===c:!1)});t("file",b)},v=()=>{s.value||(f.value=!0)};return(y,u)=>(T(),P("div",{class:$([a(n).b("dragger"),a(n).is("dragover",f.value)]),onDrop:z(l,["prevent"]),onDragover:z(v,["prevent"]),onDragleave:u[0]||(u[0]=z(h=>f.value=!1,["prevent"]))},[F(y.$slots,"default")],42,yo))}});var mo=te(bo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const ho=Y({...Kt,beforeUpload:{type:A(Function),default:j},onRemove:{type:A(Function),default:j},onStart:{type:A(Function),default:j},onSuccess:{type:A(Function),default:j},onProgress:{type:A(Function),default:j},onError:{type:A(Function),default:j},onExceed:{type:A(Function),default:j}}),$o=["onKeydown"],To=["name","multiple","accept"],wo=B({name:"ElUploadContent",inheritAttrs:!1}),_o=B({...wo,props:ho,setup(e,{expose:t}){const r=e,n=W("upload"),f=de(),s=he({}),l=he(),v=o=>{if(o.length===0)return;const{autoUpload:g,limit:m,fileList:c,multiple:E,onStart:d,onExceed:O}=r;if(m&&c.length+o.length>m){O(o,c);return}E||(o=o.slice(0,1));for(const L of o){const C=L;C.uid=Ee(),d(C),g&&y(C)}},y=async o=>{if(l.value.value="",!r.beforeUpload)return u(o);let g,m={};try{const E=r.data,d=r.beforeUpload(o);m=De(r.data)?st(r.data):r.data,g=await d,De(r.data)&&Ms(E,m)&&(m=st(r.data))}catch{g=!1}if(g===!1){r.onRemove(o);return}let c=o;g instanceof Blob&&(g instanceof File?c=g:c=new File([g],o.name,{type:o.type})),u(Object.assign(c,{uid:o.uid}),m)},u=(o,g)=>{const{headers:m,data:c,method:E,withCredentials:d,name:O,action:L,onProgress:C,onSuccess:N,onError:Wt,httpRequest:zt}=r,{uid:ge}=o,ye={headers:m||{},withCredentials:d,file:o,data:g??c,method:E,filename:O,action:L,onProgress:Q=>{C(Q,o)},onSuccess:Q=>{N(Q,o),delete s.value[ge]},onError:Q=>{Wt(Q,o),delete s.value[ge]}},ve=zt(ye);s.value[ge]=ve,ve instanceof Promise&&ve.then(ye.onSuccess,ye.onError)},h=o=>{const g=o.target.files;g&&v(Array.from(g))},b=()=>{f.value||(l.value.value="",l.value.click())},i=()=>{b()};return t({abort:o=>{mr(s.value).filter(o?([m])=>String(o.uid)===m:()=>!0).forEach(([m,c])=>{c instanceof XMLHttpRequest&&c.abort(),delete s.value[m]})},upload:y}),(o,g)=>(T(),P("div",{class:$([a(n).b(),a(n).m(o.listType),a(n).is("drag",o.drag)]),tabindex:"0",onClick:b,onKeydown:yt(z(i,["self"]),["enter","space"])},[o.drag?(T(),I(mo,{key:0,disabled:a(f),onFile:v},{default:U(()=>[F(o.$slots,"default")]),_:3},8,["disabled"])):F(o.$slots,"default",{key:1}),D("input",{ref_key:"inputRef",ref:l,class:$(a(n).e("input")),name:o.name,multiple:o.multiple,accept:o.accept,type:"file",onChange:h,onClick:g[0]||(g[0]=z(()=>{},["stop"]))},null,42,To)],42,$o))}});var dt=te(_o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const pt="ElUpload",Ao=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},So=(e,t)=>{const r=cr(e,"fileList",void 0,{passive:!0}),n=i=>r.value.find(p=>p.uid===i.uid);function f(i){var p;(p=t.value)==null||p.abort(i)}function s(i=["ready","uploading","success","fail"]){r.value=r.value.filter(p=>!i.includes(p.status))}const l=(i,p)=>{const o=n(p);o&&(console.error(i),o.status="fail",r.value.splice(r.value.indexOf(o),1),e.onError(i,o,r.value),e.onChange(o,r.value))},v=(i,p)=>{const o=n(p);o&&(e.onProgress(i,o,r.value),o.status="uploading",o.percentage=Math.round(i.percent))},y=(i,p)=>{const o=n(p);o&&(o.status="success",o.response=i,e.onSuccess(i,o,r.value),e.onChange(o,r.value))},u=i=>{ht(i.uid)&&(i.uid=Ee());const p={name:i.name,percentage:0,status:"ready",size:i.size,raw:i,uid:i.uid};if(e.listType==="picture-card"||e.listType==="picture")try{p.url=URL.createObjectURL(i)}catch(o){fr(pt,o.message),e.onError(o,p,r.value)}r.value=[...r.value,p],e.onChange(p,r.value)},h=async i=>{const p=i instanceof File?n(i):i;p||Oe(pt,"file to be removed not found");const o=g=>{f(g);const m=r.value;m.splice(m.indexOf(g),1),e.onRemove(g,m),Ao(g)};e.beforeRemove?await e.beforeRemove(p,r.value)!==!1&&o(p):o(p)};function b(){r.value.filter(({status:i})=>i==="ready").forEach(({raw:i})=>{var p;return i&&((p=t.value)==null?void 0:p.upload(i))})}return Be(()=>e.listType,i=>{i!=="picture-card"&&i!=="picture"||(r.value=r.value.map(p=>{const{raw:o,url:g}=p;if(!g&&o)try{p.url=URL.createObjectURL(o)}catch(m){e.onError(m,p,r.value)}return p}))}),Be(r,i=>{for(const p of i)p.uid||(p.uid=Ee()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:r,abort:f,clearFiles:s,handleError:l,handleProgress:v,handleStart:u,handleSuccess:y,handleRemove:h,submit:b}},Eo=B({name:"ElUpload"}),Oo=B({...Eo,props:to,setup(e,{expose:t}){const r=e,n=tr(),f=de(),s=he(),{abort:l,submit:v,clearFiles:y,uploadFiles:u,handleStart:h,handleError:b,handleRemove:i,handleSuccess:p,handleProgress:o}=So(r,s),g=R(()=>r.listType==="picture-card"),m=R(()=>({...r,fileList:u.value,onStart:h,onProgress:o,onSuccess:p,onError:b,onRemove:i}));return rr(()=>{u.value.forEach(({url:c})=>{c!=null&&c.startsWith("blob:")&&URL.revokeObjectURL(c)})}),nr(Gt,{accept:ar(r,"accept")}),t({abort:l,submit:v,clearFiles:y,handleStart:h,handleRemove:i}),(c,E)=>(T(),P("div",null,[a(g)&&c.showFileList?(T(),I(ft,{key:0,disabled:a(f),"list-type":c.listType,files:a(u),"handle-preview":c.onPreview,onRemove:a(i)},Me({append:U(()=>[k(dt,Ne({ref_key:"uploadRef",ref:s},a(m)),{default:U(()=>[a(n).trigger?F(c.$slots,"trigger",{key:0}):S("v-if",!0),!a(n).trigger&&a(n).default?F(c.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)]),_:2},[c.$slots.file?{name:"default",fn:U(({file:d})=>[F(c.$slots,"file",{file:d})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):S("v-if",!0),!a(g)||a(g)&&!c.showFileList?(T(),I(dt,Ne({key:1,ref_key:"uploadRef",ref:s},a(m)),{default:U(()=>[a(n).trigger?F(c.$slots,"trigger",{key:0}):S("v-if",!0),!a(n).trigger&&a(n).default?F(c.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)):S("v-if",!0),c.$slots.trigger?F(c.$slots,"default",{key:2}):S("v-if",!0),F(c.$slots,"tip"),!a(g)&&c.showFileList?(T(),I(ft,{key:3,disabled:a(f),"list-type":c.listType,files:a(u),"handle-preview":c.onPreview,onRemove:a(i)},Me({_:2},[c.$slots.file?{name:"default",fn:U(({file:d})=>[F(c.$slots,"file",{file:d})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):S("v-if",!0)]))}});var Po=te(Oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Uo=$t(Po);export{Uo as E,M as S,Ys as a,Cr as b,Ct as c,xt as d,_t as e,pe as f,Rt as g,Fe as h,At as i,ie as j,Re as k,Pt as l,wr as m,Rn as n,sa as o,Ea as p,Ms as q};
