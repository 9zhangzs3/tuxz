import{ao as de,o as te,a7 as fe,b as me,$ as ve,J as K,ay as pe,M as W,av as ye,ap as H,d as Y,q as R,Q as h,e as ge,I as G,c as S,k as O,l as U,m as x,L as E,B as o,t as Ce,s as D,E as X,R as be,S as _,C as se,ae as J,r as I,D as he,W as ke,az as Ee,Z as we,N as Me,z as Te,a2 as Be,at as De,A as Ie,T as Se,ak as Le}from"./entry.43ae2c8f.js";import{b as Z,d as j,_ as ne,a as $e,w as Fe}from"./base.cee28e3a.js";import{P as V}from"./vnode.2219f04a.js";import{e as q,i as le,k as Q,G as Ae,j as Oe,r as Pe,E as ze,T as ee}from"./constants.d98b03ae.js";import{i as Ne,C as Re,u as Ye,a as oe}from"./index.6427deed.js";import{r as xe}from"./use-form-common-props.7f01f78a.js";import{F as He,E as Ue}from"./focus-trap.522c89ff.js";import{U as ae}from"./event.9519ab40.js";import{a as Ve}from"./use-global-config.fc5323c1.js";import{t as We}from"./error.78e43d3e.js";import{a as Xe}from"./scroll.c02af81d.js";const _e=(...e)=>t=>{e.forEach(l=>{de(l)?l(t):l.value=t})},je=(e,t,l)=>{let a={offsetX:0,offsetY:0};const c=s=>{const u=s.clientX,v=s.clientY,{offsetX:f,offsetY:g}=a,m=e.value.getBoundingClientRect(),i=m.left,b=m.top,L=m.width,P=m.height,z=document.documentElement.clientWidth,$=document.documentElement.clientHeight,N=-i+f,F=-b+g,w=z-i-L+f,M=$-b-P+g,A=k=>{const n=Math.min(Math.max(f+k.clientX-u,N),w),C=Math.min(Math.max(g+k.clientY-v,F),M);a={offsetX:n,offsetY:C},e.value.style.transform=`translate(${q(n)}, ${q(C)})`},p=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",p)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",c)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",c)};te(()=>{fe(()=>{l.value?d():r()})}),me(()=>{r()})},qe=(e,t={})=>{ve(e)||We("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||K("popup"),a=pe(()=>l.bm("parent","hidden"));if(!le||Q(document.body,a.value))return;let c=0,d=!1,r="0";const s=()=>{setTimeout(()=>{Pe(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=r)},200)};W(e,u=>{if(!u){s();return}d=!Q(document.body,a.value),d&&(r=document.body.style.width),c=Xe(l.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=Ae(document.body,"overflowY");c>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${c}px)`),Oe(document.body,a.value)}),ye(()=>s())},re=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let t=!1,l=!1;return{onClick:r=>{t&&l&&e(r),t=l=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{l=r.target===r.currentTarget}}},Ke=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},Ge="overlay";var Je=Y({name:"ElOverlay",props:Ke,emits:Ze,setup(e,{slots:t,emit:l}){const a=K(Ge),c=u=>{l("click",u)},{onClick:d,onMousedown:r,onMouseup:s}=re(e.customMaskEvent?void 0:c);return()=>e.mask?R("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:r,onMouseup:s},[h(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(t,"default")])}});const Qe=Je,ie=Symbol("dialogInjectionKey"),ce=Z({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ne},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),eo={close:()=>!0},oo=["aria-label"],to=["id"],so=Y({name:"ElDialogContent"}),no=Y({...so,props:ce,emits:eo,setup(e){const t=e,{t:l}=xe(),{Close:a}=Re,{dialogRef:c,headerRef:d,bodyId:r,ns:s,style:u}=G(ie),{focusTrapRef:v}=G(He),f=S(()=>[s.b(),s.is("fullscreen",t.fullscreen),s.is("draggable",t.draggable),s.is("align-center",t.alignCenter),{[s.m("center")]:t.center},t.customClass]),g=_e(v,c),m=S(()=>t.draggable);return je(c,d,m),(i,b)=>(O(),U("div",{ref:o(g),class:E(o(f)),style:se(o(u)),tabindex:"-1"},[x("header",{ref_key:"headerRef",ref:d,class:E(o(s).e("header"))},[h(i.$slots,"header",{},()=>[x("span",{role:"heading",class:E(o(s).e("title"))},Ce(i.title),3)]),i.showClose?(O(),U("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:E(o(s).e("headerbtn")),type:"button",onClick:b[0]||(b[0]=L=>i.$emit("close"))},[R(o(ze),{class:E(o(s).e("close"))},{default:D(()=>[(O(),X(be(i.closeIcon||o(a))))]),_:1},8,["class"])],10,oo)):_("v-if",!0)],2),x("div",{id:o(r),class:E(o(s).e("body"))},[h(i.$slots,"default")],10,to),i.$slots.footer?(O(),U("footer",{key:0,class:E(o(s).e("footer"))},[h(i.$slots,"footer")],2)):_("v-if",!0)],6))}});var lo=ne(no,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=Z({...ce,appendToBody:Boolean,beforeClose:{type:j(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>$e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,t)=>{const a=ke().emit,{nextZIndex:c}=Ye();let d="";const r=J(),s=J(),u=I(!1),v=I(!1),f=I(!1),g=I(e.zIndex||c());let m,i;const b=Ve("namespace",Ee),L=S(()=>{const y={},B=`--${b.value}-dialog`;return e.fullscreen||(e.top&&(y[`${B}-margin-top`]=e.top),e.width&&(y[`${B}-width`]=q(e.width))),y}),P=S(()=>e.alignCenter?{display:"flex"}:{});function z(){a("opened")}function $(){a("closed"),a(ae,!1),e.destroyOnClose&&(f.value=!1)}function N(){a("close")}function F(){i==null||i(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=ee(()=>p(),e.openDelay):p()}function w(){m==null||m(),i==null||i(),e.closeDelay&&e.closeDelay>0?{stop:i}=ee(()=>k(),e.closeDelay):k()}function M(){function y(B){B||(v.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(y):w()}function A(){e.closeOnClickModal&&M()}function p(){le&&(u.value=!0)}function k(){u.value=!1}function n(){a("openAutoFocus")}function C(){a("closeAutoFocus")}function T(y){var B;((B=y.detail)==null?void 0:B.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&qe(u);function ue(){e.closeOnPressEscape&&M()}return W(()=>e.modelValue,y=>{y?(v.value=!1,F(),f.value=!0,g.value=e.zIndex?g.value++:c(),he(()=>{a("open"),t.value&&(t.value.scrollTop=0)})):u.value&&w()}),W(()=>e.fullscreen,y=>{t.value&&(y?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(u.value=!0,f.value=!0,F())}),{afterEnter:z,afterLeave:$,beforeLeave:N,handleClose:M,onModalClick:A,close:w,doClose:k,onOpenAutoFocus:n,onCloseAutoFocus:C,onCloseRequested:ue,onFocusoutPrevented:T,titleId:r,bodyId:s,closed:v,style:L,overlayDialogStyle:P,rendered:f,visible:u,zIndex:g}},co=["aria-label","aria-labelledby","aria-describedby"],uo=Y({name:"ElDialog",inheritAttrs:!1}),fo=Y({...uo,props:ao,emits:ro,setup(e,{expose:t}){const l=e,a=we();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},S(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},S(()=>!!l.customClass));const c=K("dialog"),d=I(),r=I(),s=I(),{visible:u,titleId:v,bodyId:f,style:g,overlayDialogStyle:m,rendered:i,zIndex:b,afterEnter:L,afterLeave:P,beforeLeave:z,handleClose:$,onModalClick:N,onOpenAutoFocus:F,onCloseAutoFocus:w,onCloseRequested:M,onFocusoutPrevented:A}=io(l,d);Me(ie,{dialogRef:d,headerRef:r,bodyId:f,ns:c,rendered:i,style:g});const p=re(N),k=S(()=>l.draggable&&!l.fullscreen);return t({visible:u,dialogContentRef:s}),(n,C)=>(O(),X(Le,{to:"body",disabled:!n.appendToBody},[R(Se,{name:"dialog-fade",onAfterEnter:o(L),onAfterLeave:o(P),onBeforeLeave:o(z),persisted:""},{default:D(()=>[Te(R(o(Qe),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":o(b)},{default:D(()=>[x("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:o(v),"aria-describedby":o(f),class:E(`${o(c).namespace.value}-overlay-dialog`),style:se(o(m)),onClick:C[0]||(C[0]=(...T)=>o(p).onClick&&o(p).onClick(...T)),onMousedown:C[1]||(C[1]=(...T)=>o(p).onMousedown&&o(p).onMousedown(...T)),onMouseup:C[2]||(C[2]=(...T)=>o(p).onMouseup&&o(p).onMouseup(...T))},[R(o(Ue),{loop:"",trapped:o(u),"focus-start-el":"container",onFocusAfterTrapped:o(F),onFocusAfterReleased:o(w),onFocusoutPrevented:o(A),onReleaseRequested:o(M)},{default:D(()=>[o(i)?(O(),X(lo,Be({key:0,ref_key:"dialogContentRef",ref:s},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:o(k),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,onClose:o($)}),De({header:D(()=>[n.$slots.title?h(n.$slots,"title",{key:1}):h(n.$slots,"header",{key:0,close:o($),titleId:o(v),titleClass:o(c).e("title")})]),default:D(()=>[h(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:D(()=>[h(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):_("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,co)]),_:3},8,["mask","overlay-class","z-index"]),[[Ie,o(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=ne(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const To=Fe(mo);export{To as E};
