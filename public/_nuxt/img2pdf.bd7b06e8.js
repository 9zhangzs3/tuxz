import{E as V}from"./index.5fe7711e.js";import{E as j}from"./el-progress.1e2c2aec.js";import{E as L}from"./el-image-viewer.eaed6a7f.js";import{E as S,p as k,q as F,z as N,a as O}from"./constants.32292d8d.js";import{E as R}from"./el-card.a0645fe2.js";import{E as q}from"./el-overlay.35552634.js";import{_ as A}from"./client-only.5718a18c.js";import"./base.c3d2e3d9.js";/* empty css                  *//* empty css                */import"./el-loading.4998970f.js";import{d as T,r as h,k as $,l as H,z as I,A as C,m as o,q as e,s as t,B as d,v as D,x as X,y as Y,_ as G}from"./entry.1dc6e359.js";import{D as J}from"./vuedraggable.umd.cf5c66ce.js";import{E as K}from"./jspdf.es.min.18c00d19.js";import{f as M}from"./util.a9abac9b.js";import{E as Q}from"./index.55621d2c.js";import"./index.901f8d30.js";import"./use-global-config.5035f634.js";import"./use-form-common-props.197ce949.js";import"./index.f8748455.js";import"./error.78e43d3e.js";import"./aria.60e0cdc6.js";import"./debounce.72c54a3b.js";import"./index.ca35bea9.js";import"./position.7b373cbe.js";import"./scroll.9c3d5e4c.js";import"./vnode.edf20a27.js";import"./focus-trap.8aa43648.js";import"./event.9519ab40.js";import"./_commonjsHelpers.042e6b4d.js";const x=f=>(X("data-v-bfc8dec2"),f=f(),Y(),f),W={style:{width:"90%",margin:"0 auto"}},Z={style:{width:"60%",margin:"0 auto","margin-top":"15%"}},ee=x(()=>o("div",{style:{"font-size":"24px",height:"50px"}},"图片转PDF",-1)),te={style:{"margin-top":"10%","font-size":"24px"}},oe=x(()=>o("div",{style:{color:"black"}},"或者拖放多个文件",-1)),ae={style:{width:"100%",margin:"0 auto","margin-top":"10%"}},le={class:"drag-box",style:{width:"70%",float:"left",margin:"0 auto","text-align":"center"}},se={style:{float:"left",margin:"0 8px 8px 0",border:"1px solid var(--el-border-color)","border-radius":"6px",position:"relative"}},ie=x(()=>o("div",{style:{height:"10px"}},null,-1)),re=["src"],ne={style:{float:"right",width:"25%"}},ce=T({__name:"img2pdf",setup(f){const w=h(!0),c=h([]),b=h(""),v=h(!1),E=a=>{a.id=c.value.length,c.value.push(a),w.value=!1},P=a=>{console.log(a),c.value.splice(a,1)},z=a=>{console.log(111),b.value=c.value[a].url,v.value=!0};async function B(){const a=Q.service({lock:!0,background:"rgba(0, 0, 0, 0.7)"}),[p,i]=[595.28,841.89],l=new K("p","pt","a4",!0);for(const r of c.value){const s=new Image;s.src=URL.createObjectURL(r.raw);let u=0,_=0;await new Promise(U=>{s.onload=()=>{_=s.width,u=s.height,URL.revokeObjectURL(s.src),U(0)}});const m=await M(r.raw);let n=p/(_/u),g=0;n>i?n=i:g=(i-n)/2,l.addImage(m,0,g,p,n,r.name),l.addPage()}const y=l.internal.getNumberOfPages();l.deletePage(y),l.save("image.pdf"),a.close()}return(a,p)=>{const i=V,l=j,y=L,r=S,s=R,u=q,_=A;return $(),H("div",W,[I(o("div",Z,[ee,o("div",null,[e(l,{class:"upload-demo",drag:"","list-type":"picture-card","show-file-list":!1,"auto-upload":!1,onChange:E,multiple:"true",accept:".gif,.tif,.tiff,.png,.crw,.cr2,.dng,.raf,.nef,.nrw,.orf,.rw2,.pef,.arw,.srf,.sr2,.raw,.psd,.svg,.webp,.heic,.jpg,.jpeg"},{default:t(()=>[o("div",te,[e(i,{ref:"uploadId",style:{"font-size":"24px"},type:"primary",round:"",size:"large",icon:d(k)},{default:t(()=>[D("上传多个图片")]),_:1},8,["icon"]),oe])]),_:1})])],512),[[C,w.value]]),I(o("div",ae,[o("div",le,[e(s,{shadow:"always"},{default:t(()=>[e(d(J),{list:c.value,animation:100,"item-key":"id",class:"list-group",forceFallback:!0,"ghost-class":"ghost"},{item:t(({element:m,index:n})=>[o("div",se,[e(y,{fit:"contain",style:{width:"150px",height:"150px"},src:m.url},null,8,["src"]),e(i,{type:"danger",class:"el-icon-close",onClick:g=>P(n),icon:d(F),circle:"",color:"#D6D6D6"},null,8,["onClick","icon"]),e(r,{class:"el-icon-yl",onClick:g=>z(n)},{default:t(()=>[e(d(N))]),_:2},1032,["onClick"])])]),_:1},8,["list"]),e(l,{style:{float:"left","margin-left":"5px","margin-bottom":"10px"},"auto-upload":!1,"list-type":"picture-card","show-file-list":!1,multiple:"true",onChange:E,accept:".gif,.tif,.tiff,.png,.crw,.cr2,.dng,.raf,.nef,.nrw,.orf,.rw2,.pef,.arw,.srf,.sr2,.raw,.psd,.svg,.webp,.heic,.jpg,.jpeg"},{default:t(()=>[e(r,null,{default:t(()=>[e(d(k))]),_:1})]),_:1}),ie]),_:1})]),e(_,null,{default:t(()=>[e(u,{modelValue:v.value,"onUpdate:modelValue":p[0]||(p[0]=m=>v.value=m)},{default:t(()=>[o("img",{"w-full":"",src:b.value,style:{width:"100%"},alt:"Preview Image"},null,8,re)]),_:1},8,["modelValue"])]),_:1}),o("div",ne,[e(s,{shadow:"always"},{default:t(()=>[e(i,{onClick:B,type:"primary",style:{width:"100%"},size:"large"},{default:t(()=>[D("生成PDF "),e(r,{class:"el-icon--right"},{default:t(()=>[e(d(O))]),_:1})]),_:1})]),_:1})])],512),[[C,!w.value]])])}}});const qe=G(ce,[["__scopeId","data-v-bfc8dec2"]]);export{qe as default};
