import{E as w,p as _}from"./constants.eb0fc12e.js";import{E as h}from"./el-progress.56adb9af.js";import{E as g}from"./index.50b37a87.js";import"./base.b0a13d53.js";/* empty css                *//* empty css                  */import{d as E,r as C,k as x,l as B,q as i,s as l,B as P,m,v as p,F as k}from"./entry.7321a61b.js";import"./error.78e43d3e.js";import"./use-form-common-props.d48746c9.js";import"./index.636cfc4c.js";import"./use-global-config.f9c3cc9d.js";import"./index.f8748455.js";const y={style:{width:"100px",height:"30px"}},L={style:{width:"100px",height:"30px"}},N={style:{width:"100px",height:"30px"}},q=E({__name:"imageFormatConvert",setup(F){const s=C([]);function u(a){return new Promise((e,n)=>{var t=document.createElement("canvas"),o=new Image;let r=t.getContext("2d");o.src=a,o.onload=()=>{t.width=o.width,t.height=o.height,r.drawImage(o,0,0),e(t)}})}const c=(a,e)=>{var n=a.toDataURL(e);return n};async function d(a){for(let n=0;n<s.value.length;n++){let t=s.value[n].raw;const o=await v(t);let r=await u(o),f=c(r,"image/"+a);var e=document.createElement("a");e.download=(t==null?void 0:t.name.split(".")[0])+"."+a.toLocaleLowerCase(),e.href=f,document.body.appendChild(e),e.click(),e.remove()}}const v=a=>new Promise((e,n)=>{let t=new FileReader;t.readAsDataURL(a),t.onload=o=>{e(o.target.result)}});return(a,e)=>{const n=w,t=h,o=g;return x(),B(k,null,[i(t,{"file-list":s.value,"onUpdate:fileList":e[0]||(e[0]=r=>s.value=r),"auto-upload":!1,"list-type":"picture-card","on-preview":a.handlePictureCardPreview,"on-remove":a.handleRemove,"show-file-list":!0},{default:l(()=>[i(n,null,{default:l(()=>[i(P(_))]),_:1})]),_:1},8,["file-list","on-preview","on-remove"]),m("div",y,[i(o,{onClick:e[1]||(e[1]=r=>d("PNG"))},{default:l(()=>[p("转PNG")]),_:1})]),m("div",L,[i(o,{onClick:e[2]||(e[2]=r=>d("JPEG"))},{default:l(()=>[p("转JPEG")]),_:1})]),m("div",N,[i(o,{onClick:e[3]||(e[3]=r=>d("WEBP"))},{default:l(()=>[p("转WEBP")]),_:1})])],64)}}});export{q as default};
