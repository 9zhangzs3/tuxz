import{ag as ue,J as W,r as _,o as Y,M as S,c as y,W as G,d as H,k as w,l as F,m as M,L as p,B as s,C as V,V as Q,a3 as he,I as He,a7 as Te,F as Ie,H as Be,O as Oe,D as R,N as De,E as U,s as T,z as de,q as A,S as j,a9 as fe,v as pe,t as ve,A as We}from"./entry.43ae2c8f.js";import{u as Ke,a as ze,E as me}from"./index.0d4f5f8c.js";import{i as qe,e as ge,H as x,E as be,g as Re,A as Ue}from"./constants.d98b03ae.js";import{E as je}from"./index.83442321.js";import{E as Xe}from"./el-input.a4c23736.js";import{b as we,d as ye,_ as K,w as Ye}from"./base.cee28e3a.js";import{g as ne}from"./position.06e21eb3.js";import{u as Ge,r as Je,q as Ze,p as Qe}from"./use-form-common-props.7f01f78a.js";import{U as oe,C as xe}from"./event.9519ab40.js";import{d as ke}from"./error.78e43d3e.js";import{C as et}from"./index.8e2fb51b.js";import{d as tt}from"./debounce.d3e34170.js";const ot=we({color:{type:ye(Object),required:!0},vertical:{type:Boolean,default:!1}});let ee=!1;function D(t,n){if(!qe)return;const o=function(a){var l;(l=n.drag)==null||l.call(n,a)},e=function(a){var l;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",e),document.onselectstart=null,document.ondragstart=null,ee=!1,(l=n.end)==null||l.call(n,a)},r=function(a){var l;ee||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",e),document.addEventListener("touchmove",o),document.addEventListener("touchend",e),ee=!0,(l=n.start)==null||l.call(n,a))};t.addEventListener("mousedown",r),t.addEventListener("touchstart",r)}const nt=t=>{const n=G(),o=ue(),e=ue();function r(l){l.target!==o.value&&a(l)}function a(l){if(!e.value||!o.value)return;const i=n.vnode.el.getBoundingClientRect(),{clientX:u,clientY:$}=ne(l);if(t.vertical){let h=$-i.top;h=Math.max(o.value.offsetHeight/2,h),h=Math.min(h,i.height-o.value.offsetHeight/2),t.color.set("alpha",Math.round((h-o.value.offsetHeight/2)/(i.height-o.value.offsetHeight)*100))}else{let h=u-i.left;h=Math.max(o.value.offsetWidth/2,h),h=Math.min(h,i.width-o.value.offsetWidth/2),t.color.set("alpha",Math.round((h-o.value.offsetWidth/2)/(i.width-o.value.offsetWidth)*100))}}return{thumb:o,bar:e,handleDrag:a,handleClick:r}},at=(t,{bar:n,thumb:o,handleDrag:e})=>{const r=G(),a=W("color-alpha-slider"),l=_(0),c=_(0),i=_();function u(){if(!o.value||t.vertical)return 0;const v=r.vnode.el,f=t.color.get("alpha");return v?Math.round(f*(v.offsetWidth-o.value.offsetWidth/2)/100):0}function $(){if(!o.value)return 0;const v=r.vnode.el;if(!t.vertical)return 0;const f=t.color.get("alpha");return v?Math.round(f*(v.offsetHeight-o.value.offsetHeight/2)/100):0}function h(){if(t.color&&t.color.value){const{r:v,g:f,b:z}=t.color.toRgb();return`linear-gradient(to right, rgba(${v}, ${f}, ${z}, 0) 0%, rgba(${v}, ${f}, ${z}, 1) 100%)`}return""}function C(){l.value=u(),c.value=$(),i.value=h()}Y(()=>{if(!n.value||!o.value)return;const v={drag:f=>{e(f)},end:f=>{e(f)}};D(n.value,v),D(o.value,v),C()}),S(()=>t.color.get("alpha"),()=>C()),S(()=>t.color.value,()=>C());const m=y(()=>[a.b(),a.is("vertical",t.vertical)]),g=y(()=>a.e("bar")),b=y(()=>a.e("thumb")),k=y(()=>({background:i.value})),N=y(()=>({left:ge(l.value),top:ge(c.value)}));return{rootKls:m,barKls:g,barStyle:k,thumbKls:b,thumbStyle:N,update:C}},lt="ElColorAlphaSlider",rt=H({name:lt}),st=H({...rt,props:ot,setup(t,{expose:n}){const o=t,{bar:e,thumb:r,handleDrag:a,handleClick:l}=nt(o),{rootKls:c,barKls:i,barStyle:u,thumbKls:$,thumbStyle:h,update:C}=at(o,{bar:e,thumb:r,handleDrag:a});return n({update:C,bar:e,thumb:r}),(m,g)=>(w(),F("div",{class:p(s(c))},[M("div",{ref_key:"bar",ref:e,class:p(s(i)),style:V(s(u)),onClick:g[0]||(g[0]=(...b)=>s(l)&&s(l)(...b))},null,6),M("div",{ref_key:"thumb",ref:r,class:p(s($)),style:V(s(h))},null,6)],2))}});var it=K(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const ct=H({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const n=W("color-hue-slider"),o=G(),e=_(),r=_(),a=_(0),l=_(0),c=y(()=>t.color.get("hue"));S(()=>c.value,()=>{C()});function i(m){m.target!==e.value&&u(m)}function u(m){if(!r.value||!e.value)return;const b=o.vnode.el.getBoundingClientRect(),{clientX:k,clientY:N}=ne(m);let v;if(t.vertical){let f=N-b.top;f=Math.min(f,b.height-e.value.offsetHeight/2),f=Math.max(e.value.offsetHeight/2,f),v=Math.round((f-e.value.offsetHeight/2)/(b.height-e.value.offsetHeight)*360)}else{let f=k-b.left;f=Math.min(f,b.width-e.value.offsetWidth/2),f=Math.max(e.value.offsetWidth/2,f),v=Math.round((f-e.value.offsetWidth/2)/(b.width-e.value.offsetWidth)*360)}t.color.set("hue",v)}function $(){if(!e.value)return 0;const m=o.vnode.el;if(t.vertical)return 0;const g=t.color.get("hue");return m?Math.round(g*(m.offsetWidth-e.value.offsetWidth/2)/360):0}function h(){if(!e.value)return 0;const m=o.vnode.el;if(!t.vertical)return 0;const g=t.color.get("hue");return m?Math.round(g*(m.offsetHeight-e.value.offsetHeight/2)/360):0}function C(){a.value=$(),l.value=h()}return Y(()=>{if(!r.value||!e.value)return;const m={drag:g=>{u(g)},end:g=>{u(g)}};D(r.value,m),D(e.value,m),C()}),{bar:r,thumb:e,thumbLeft:a,thumbTop:l,hueValue:c,handleClick:i,update:C,ns:n}}});function ut(t,n,o,e,r,a){return w(),F("div",{class:p([t.ns.b(),t.ns.is("vertical",t.vertical)])},[M("div",{ref:"bar",class:p(t.ns.e("bar")),onClick:n[0]||(n[0]=(...l)=>t.handleClick&&t.handleClick(...l))},null,2),M("div",{ref:"thumb",class:p(t.ns.e("thumb")),style:V({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var ht=K(ct,[["render",ut],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const dt=we({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Ge,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:ye(Array)},validateEvent:{type:Boolean,default:!0}}),ft={[oe]:t=>Q(t)||x(t),[xe]:t=>Q(t)||x(t),activeChange:t=>Q(t)||x(t)},Ee=Symbol("colorPickerContextKey"),_e=function(t,n,o){return[t,n*o/((t=(2-n)*o)<1?t:2-t)||0,t/2]},pt=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},vt=function(t){return typeof t=="string"&&t.includes("%")},I=function(t,n){pt(t)&&(t="100%");const o=vt(t);return t=Math.min(n,Math.max(0,Number.parseFloat(`${t}`))),o&&(t=Number.parseInt(`${t*n}`,10)/100),Math.abs(t-n)<1e-6?1:t%n/Number.parseFloat(n)},$e={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},X=t=>{t=Math.min(Math.round(t),255);const n=Math.floor(t/16),o=t%16;return`${$e[n]||n}${$e[o]||o}`},Ce=function({r:t,g:n,b:o}){return Number.isNaN(+t)||Number.isNaN(+n)||Number.isNaN(+o)?"":`#${X(t)}${X(n)}${X(o)}`},te={A:10,B:11,C:12,D:13,E:14,F:15},L=function(t){return t.length===2?(te[t[0].toUpperCase()]||+t[0])*16+(te[t[1].toUpperCase()]||+t[1]):te[t[1].toUpperCase()]||+t[1]},mt=function(t,n,o){n=n/100,o=o/100;let e=n;const r=Math.max(o,.01);o*=2,n*=o<=1?o:2-o,e*=r<=1?r:2-r;const a=(o+n)/2,l=o===0?2*e/(r+e):2*n/(o+n);return{h:t,s:l*100,v:a*100}},Me=(t,n,o)=>{t=I(t,255),n=I(n,255),o=I(o,255);const e=Math.max(t,n,o),r=Math.min(t,n,o);let a;const l=e,c=e-r,i=e===0?0:c/e;if(e===r)a=0;else{switch(e){case t:{a=(n-o)/c+(n<o?6:0);break}case n:{a=(o-t)/c+2;break}case o:{a=(t-n)/c+4;break}}a/=6}return{h:a*360,s:i*100,v:l*100}},B=function(t,n,o){t=I(t,360)*6,n=I(n,100),o=I(o,100);const e=Math.floor(t),r=t-e,a=o*(1-n),l=o*(1-r*n),c=o*(1-(1-r)*n),i=e%6,u=[o,l,a,a,c,o][i],$=[c,o,o,l,a,a][i],h=[a,a,c,o,o,l][i];return{r:Math.round(u*255),g:Math.round($*255),b:Math.round(h*255)}};class O{constructor(n={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in n)he(n,o)&&(this[o]=n[o]);n.value?this.fromString(n.value):this.doOnChange()}set(n,o){if(arguments.length===1&&typeof n=="object"){for(const e in n)he(n,e)&&this.set(e,n[e]);return}this[`_${n}`]=o,this.doOnChange()}get(n){return n==="alpha"?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return B(this._hue,this._saturation,this._value)}fromString(n){if(!n){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(e,r,a)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(n.includes("hsl")){const e=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3){const{h:r,s:a,v:l}=mt(e[0],e[1],e[2]);o(r,a,l)}}else if(n.includes("hsv")){const e=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3&&o(e[0],e[1],e[2])}else if(n.includes("rgb")){const e=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(e.length===4?this._alpha=Number.parseFloat(e[3])*100:e.length===3&&(this._alpha=100),e.length>=3){const{h:r,s:a,v:l}=Me(e[0],e[1],e[2]);o(r,a,l)}}else if(n.includes("#")){const e=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(e))return;let r,a,l;e.length===3?(r=L(e[0]+e[0]),a=L(e[1]+e[1]),l=L(e[2]+e[2])):(e.length===6||e.length===8)&&(r=L(e.slice(0,2)),a=L(e.slice(2,4)),l=L(e.slice(4,6))),e.length===8?this._alpha=L(e.slice(6))/255*100:(e.length===3||e.length===6)&&(this._alpha=100);const{h:c,s:i,v:u}=Me(r,a,l);o(c,i,u)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:o,_value:e,_alpha:r,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const l=_e(n,o/100,e/100);this.value=`hsla(${n}, ${Math.round(l[1]*100)}%, ${Math.round(l[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${n}, ${Math.round(o)}%, ${Math.round(e)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Ce(B(n,o,e))}${X(r*255/100)}`;break}default:{const{r:l,g:c,b:i}=B(n,o,e);this.value=`rgba(${l}, ${c}, ${i}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const l=_e(n,o/100,e/100);this.value=`hsl(${n}, ${Math.round(l[1]*100)}%, ${Math.round(l[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${n}, ${Math.round(o)}%, ${Math.round(e)}%)`;break}case"rgb":{const{r:l,g:c,b:i}=B(n,o,e);this.value=`rgb(${l}, ${c}, ${i})`;break}default:this.value=Ce(B(n,o,e))}}}const gt=H({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(t){const n=W("color-predefine"),{currentColor:o}=He(Ee),e=_(a(t.colors,t.color));S(()=>o.value,l=>{const c=new O;c.fromString(l),e.value.forEach(i=>{i.selected=c.compare(i)})}),Te(()=>{e.value=a(t.colors,t.color)});function r(l){t.color.fromString(t.colors[l])}function a(l,c){return l.map(i=>{const u=new O;return u.enableAlpha=!0,u.format="rgba",u.fromString(i),u.selected=u.value===c.value,u})}return{rgbaColors:e,handleSelect:r,ns:n}}}),bt=["onClick"];function kt(t,n,o,e,r,a){return w(),F("div",{class:p(t.ns.b())},[M("div",{class:p(t.ns.e("colors"))},[(w(!0),F(Ie,null,Be(t.rgbaColors,(l,c)=>(w(),F("div",{key:t.colors[c],class:p([t.ns.e("color-selector"),t.ns.is("alpha",l._alpha<100),{selected:l.selected}]),onClick:i=>t.handleSelect(c)},[M("div",{style:V({backgroundColor:l.value})},null,4)],10,bt))),128))],2)],2)}var _t=K(gt,[["render",kt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const $t=H({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const n=W("color-svpanel"),o=G(),e=_(0),r=_(0),a=_("hsl(0, 100%, 50%)"),l=y(()=>{const u=t.color.get("hue"),$=t.color.get("value");return{hue:u,value:$}});function c(){const u=t.color.get("saturation"),$=t.color.get("value"),h=o.vnode.el,{clientWidth:C,clientHeight:m}=h;r.value=u*C/100,e.value=(100-$)*m/100,a.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function i(u){const h=o.vnode.el.getBoundingClientRect(),{clientX:C,clientY:m}=ne(u);let g=C-h.left,b=m-h.top;g=Math.max(0,g),g=Math.min(g,h.width),b=Math.max(0,b),b=Math.min(b,h.height),r.value=g,e.value=b,t.color.set({saturation:g/h.width*100,value:100-b/h.height*100})}return S(()=>l.value,()=>{c()}),Y(()=>{D(o.vnode.el,{drag:u=>{i(u)},end:u=>{i(u)}}),c()}),{cursorTop:e,cursorLeft:r,background:a,colorValue:l,handleDrag:i,update:c,ns:n}}}),Ct=M("div",null,null,-1),Mt=[Ct];function wt(t,n,o,e,r,a){return w(),F("div",{class:p(t.ns.b()),style:V({backgroundColor:t.background})},[M("div",{class:p(t.ns.e("white"))},null,2),M("div",{class:p(t.ns.e("black"))},null,2),M("div",{class:p(t.ns.e("cursor")),style:V({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},Mt,6)],6)}var yt=K($t,[["render",wt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const Et=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],St=H({name:"ElColorPicker"}),Nt=H({...St,props:dt,emits:ft,setup(t,{expose:n,emit:o}){const e=t,{t:r}=Je(),a=W("color"),{formItem:l}=Ke(),c=Ze(),i=Qe(),{inputId:u,isLabeledByFormItem:$}=ze(e,{formItemContext:l}),h=_(),C=_(),m=_(),g=_();let b=!0;const k=Oe(new O({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue})),N=_(!1),v=_(!1),f=_(""),z=y(()=>!e.modelValue&&!v.value?"transparent":Fe(k,e.showAlpha)),J=y(()=>!e.modelValue&&!v.value?"":k.value),Se=y(()=>$.value?void 0:e.label||r("el.colorpicker.defaultLabel")),Ne=y(()=>$.value?l==null?void 0:l.labelId:void 0),Ae=y(()=>[a.b("picker"),a.is("disabled",i.value),a.bm("picker",c.value)]);function Fe(d,E){if(!(d instanceof O))throw new TypeError("color should be instance of _color Class");const{r:P,g:ie,b:ce}=d.toRgb();return E?`rgba(${P}, ${ie}, ${ce}, ${d.get("alpha")/100})`:`rgb(${P}, ${ie}, ${ce})`}function ae(d){N.value=d}const q=tt(ae,100);function Pe(){i.value||ae(!0)}function le(){q(!1),Z()}function Z(){R(()=>{e.modelValue?k.fromString(e.modelValue):(k.value="",R(()=>{v.value=!1}))})}function re(){i.value||q(!N.value)}function se(){k.fromString(f.value)}function Le(){const d=k.value;o(oe,d),o("change",d),e.validateEvent&&(l==null||l.validate("change").catch(E=>ke())),q(!1),R(()=>{const E=new O({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue});k.compare(E)||Z()})}function Ve(){q(!1),o(oe,null),o("change",null),e.modelValue!==null&&e.validateEvent&&(l==null||l.validate("change").catch(d=>ke())),Z()}return Y(()=>{e.modelValue&&(f.value=J.value)}),S(()=>e.modelValue,d=>{d?d&&d!==k.value&&(b=!1,k.fromString(d)):v.value=!1}),S(()=>J.value,d=>{f.value=d,b&&o("activeChange",d),b=!0}),S(()=>k.value,()=>{!e.modelValue&&!v.value&&(v.value=!0)}),S(()=>N.value,()=>{R(()=>{var d,E,P;(d=h.value)==null||d.update(),(E=C.value)==null||E.update(),(P=m.value)==null||P.update()})}),De(Ee,{currentColor:J}),n({color:k,show:Pe,hide:le}),(d,E)=>(w(),U(s(je),{ref_key:"popper",ref:g,visible:N.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[s(a).be("picker","panel"),s(a).b("dropdown"),d.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${s(a).namespace.value}-zoom-in-top`,persistent:""},{content:T(()=>[de((w(),F("div",null,[M("div",{class:p(s(a).be("dropdown","main-wrapper"))},[A(ht,{ref_key:"hue",ref:h,class:"hue-slider",color:s(k),vertical:""},null,8,["color"]),A(yt,{ref_key:"sv",ref:C,color:s(k)},null,8,["color"])],2),d.showAlpha?(w(),U(it,{key:0,ref_key:"alpha",ref:m,color:s(k)},null,8,["color"])):j("v-if",!0),d.predefine?(w(),U(_t,{key:1,ref:"predefine",color:s(k),colors:d.predefine},null,8,["color","colors"])):j("v-if",!0),M("div",{class:p(s(a).be("dropdown","btns"))},[M("span",{class:p(s(a).be("dropdown","value"))},[A(s(Xe),{modelValue:f.value,"onUpdate:modelValue":E[0]||(E[0]=P=>f.value=P),"validate-event":!1,size:"small",onKeyup:fe(se,["enter"]),onBlur:se},null,8,["modelValue","onKeyup"])],2),A(s(me),{class:p(s(a).be("dropdown","link-btn")),text:"",size:"small",onClick:Ve},{default:T(()=>[pe(ve(s(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),A(s(me),{plain:"",size:"small",class:p(s(a).be("dropdown","btn")),onClick:Le},{default:T(()=>[pe(ve(s(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[s(et),le]])]),default:T(()=>[M("div",{id:s(u),class:p(s(Ae)),role:"button","aria-label":s(Se),"aria-labelledby":s(Ne),"aria-description":s(r)("el.colorpicker.description",{color:d.modelValue||""}),tabindex:d.tabindex,onKeydown:fe(re,["enter"])},[s(i)?(w(),F("div",{key:0,class:p(s(a).be("picker","mask"))},null,2)):j("v-if",!0),M("div",{class:p(s(a).be("picker","trigger")),onClick:re},[M("span",{class:p([s(a).be("picker","color"),s(a).is("alpha",d.showAlpha)])},[M("span",{class:p(s(a).be("picker","color-inner")),style:V({backgroundColor:s(z)})},[de(A(s(be),{class:p([s(a).be("picker","icon"),s(a).is("icon-arrow-down")])},{default:T(()=>[A(s(Re))]),_:1},8,["class"]),[[We,d.modelValue||v.value]]),!d.modelValue&&!v.value?(w(),U(s(be),{key:0,class:p([s(a).be("picker","empty"),s(a).is("icon-close")])},{default:T(()=>[A(s(Ue))]),_:1},8,["class"])):j("v-if",!0)],6)],2)],2)],42,Et)]),_:1},8,["visible","popper-class","transition"]))}});var At=K(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const zt=Ye(At);export{zt as E};
