import{T as M,M as j,H as D}from"./components.b8cc7c2b.js";import{E as H}from"./index.8f5bc808.js";import{E as N}from"./el-progress.1eae7595.js";import{E as A,a as O}from"./el-tabs.1c3126a6.js";import"./base.c054e6db.js";/* empty css                  */import{v as P}from"./el-loading.b1ea91ae.js";import{d as q,r as l,k as x,l as $,q as a,s,v as p,m as o,z as h,A as k,B as E,E as G,C as J,F as K,x as Q,y as W,_ as X}from"./entry.89a8456c.js";import{p as Y,u as Z}from"./constants.0737b991.js";import{f as ee}from"./util.a9abac9b.js";import"./index.64d33a3b.js";import"./use-global-config.0787c757.js";import"./use-form-common-props.4add0763.js";import"./index.f8748455.js";import"./error.78e43d3e.js";import"./aria.60e0cdc6.js";import"./event.9519ab40.js";import"./vnode.76be746b.js";const g=r=>(Q("data-v-b1158549"),r=r(),W(),r),te={style:{width:"90%",margin:"0 auto"}},oe={style:{width:"60%",margin:"0 auto","margin-top":"15%"}},ae=g(()=>o("div",{style:{"font-size":"24px",height:"50px"}},"黑白图片变彩色",-1)),le={style:{"margin-top":"10%","font-size":"24px"}},se=g(()=>o("div",{style:{color:"black"}},"或者拖放一个文件",-1)),ne={style:{width:"80%",margin:"0 auto","margin-top":"10%"}},ie={style:{float:"left",width:"45%",position:"relative"}},re={class:"cutout-image-container"},ce=["src"],de={class:"cutout-image-container"},pe=["src"],ue={style:{float:"right",width:"45%",height:"442px",margin:"0 auto"}},me=g(()=>o("div",{style:{height:"400px"}},null,-1)),_e={style:{width:"100%",margin:"0 auto"}},fe=q({__name:"color",setup(r){const u=l(!0),c=l("before"),m=l(!0),B=l(),_=l(),w=l(),f=l(),d=l(""),y=l(),I=async t=>{u.value=!0,c.value="before",d.value="",B.value=t.raw,m.value=!1,w.value=await ee(t.raw),await T(t.raw)},T=async t=>{_.value=t;const e=new FormData;e.append("file",t);const i=await(await fetch("http://124.220.44.98:5001/api/colorize",{method:"POST",body:e})).blob();f.value=URL.createObjectURL(i),u.value=!1,c.value="after"},z=t=>{const e=document.createElement("a");e.href=t,e.download=_.value.name,e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{e.remove()},100)},C=()=>{var t=new Image;t.src=f.value;let e=document.createElement("canvas"),n=e.getContext("2d");t.onload=()=>{e.width=t.width,e.height=t.height,d&&(n.fillStyle=d.value),n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0);var i=e.toDataURL(_.value.type);z(i)}},S=()=>{var t,e;(e=(t=y.value)==null?void 0:t.$.vnode.el)==null||e.click()};return(t,e)=>{const n=M,i=j,F=D,v=H,U=N,b=A,V=O,L=P;return x(),$(K,null,[a(F,null,{default:s(()=>[a(n,null,{default:s(()=>[p("黑白图片变彩色")]),_:1}),a(i,{name:"description",content:"将您的图片进行修复和上色"}),a(i,{name:"keywords",content:"图像,彩色,黑白,修复,老照片,图片上色"})]),_:1}),o("div",te,[h(o("div",oe,[ae,o("div",null,[a(U,{class:"upload-demo",drag:"","show-file-list":!1,"auto-upload":!1,onChange:I,accept:".gif,.tif,.tiff,.png,.crw,.cr2,.dng,.raf,.nef,.nrw,.orf,.rw2,.pef,.arw,.srf,.sr2,.raw,.psd,.svg,.webp,.heic,.avif,.jpg,.jpeg"},{default:s(()=>[o("div",le,[a(v,{ref_key:"uploadColorId",ref:y,style:{"font-size":"24px"},type:"primary",round:"",size:"large",icon:E(Y)},{default:s(()=>[p("上传图片")]),_:1},8,["icon"]),se])]),_:1})])],512),[[k,m.value]]),h(o("div",ne,[o("div",ie,[h((x(),G(V,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=R=>c.value=R),type:"card",style:{width:"100%"},"element-loading-background":"rgba(122, 122, 122, 0.5)"},{default:s(()=>[a(b,{name:"before",label:"修复前"},{default:s(()=>[o("div",re,[o("img",{src:w.value,style:{"max-width":"100%","max-height":"100%",display:"block"}},null,8,ce)])]),_:1}),a(b,{name:"after",label:"修复后"},{default:s(()=>[o("div",de,[o("img",{src:f.value,style:J({"max-width":"100%","max-height":"100%",display:"block","background-color":d.value})},null,12,pe)])]),_:1})]),_:1},8,["modelValue"])),[[L,u.value]]),a(v,{type:"primary",onClick:S,style:{position:"absolute",top:"5px",right:"0"},icon:E(Z)},{default:s(()=>[p("重新上传")]),_:1},8,["icon"])]),o("div",ue,[me,o("div",_e,[a(v,{onClick:C,type:"primary",round:"",size:"large",style:{"font-size":"20px",width:"150px"}},{default:s(()=>[p("下载")]),_:1})])])],512),[[k,!m.value]])])],64)}}});const Le=X(fe,[["__scopeId","data-v-b1158549"]]);export{Le as default};
